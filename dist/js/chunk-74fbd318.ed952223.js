(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74fbd318"],{"0040":function(e,t,n){"use strict";var a=function(){};e.exports=function(e){return{filterToEnabled:function(t,n){var i={main:[],facade:[]};return t?"string"===typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"!==e.transportName||!1!==n.websocket?t.length&&-1===t.indexOf(e.transportName)?a("not in whitelist",e.transportName):e.enabled(n)?(a("enabled",e.transportName),i.main.push(e),e.facadeTransport&&i.facade.push(e.facadeTransport)):a("disabled",e.transportName):a("disabled from server","websocket"))})),i}}}},"0841":function(e,t,n){},"0e88":function(e,t,n){"use strict";var a=n("3fb5"),i=n("ada0").EventEmitter,r=function(){};function o(e,t,n){r(t),i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}a(o,i),o.prototype._scheduleReceiver=function(){r("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){r("message",t),e.emit("message",t)})),t.once("close",(function(n,a){r("close",n,a,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===a?e._scheduleReceiver():(e.emit("close",n||1006,a),e.removeAllListeners()))}))},o.prototype.abort=function(){r("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=o},1015:function(e,t){e.exports="1.4.0"},1168:function(e,t,n){e.exports=n("ba0c").version},"13c0":function(e,t,n){"use strict";(function(t){var n=t.WebSocket||t.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0}).call(this,n("c8ba"))},1548:function(e,t,n){"use strict";var a=n("3fb5"),i=n("ada0").EventEmitter,r=function(){};function o(e,t){r(e),i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){r("finish",e,t),n._chunkHandler(e,t),n.xo=null;var a=200===e?"network":"permanent";r("close",a),n.emit("close",null,a),n._cleanup()}))}a(o,i),o.prototype._chunkHandler=function(e,t){if(r("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var a=t.slice(this.bufferPosition);if(n=a.indexOf("\n"),-1===n)break;var i=a.slice(0,n);i&&(r("message",i),this.emit("message",i))}},o.prototype._cleanup=function(){r("_cleanup"),this.removeAllListeners()},o.prototype.abort=function(){r("abort"),this.xo&&(this.xo.close(),r("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=o},"17c4":function(e,t,n){"use strict";var a=n("345e"),i=n.n(a);i.a},1816:function(e,t,n){"use strict";(function(t){var a=n("440d"),i=n("9c59"),r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",l=new RegExp("^"+s+"+");function c(e){return(e||"").toString().replace(l,"")}var u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function p(e){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};var a=n.location||{};e=e||a;var i,o={},s=typeof e;if("blob:"===e.protocol)o=new m(unescape(e.pathname),{});else if("string"===s)for(i in o=new m(e,{}),d)delete o[i];else if("object"===s){for(i in e)i in d||(o[i]=e[i]);void 0===o.slashes&&(o.slashes=r.test(e.href))}return o}function f(e){e=c(e);var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function h(e,t){if(""===e)return t;var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=n.length,i=n[a-1],r=!1,o=0;while(a--)"."===n[a]?n.splice(a,1):".."===n[a]?(n.splice(a,1),o++):o&&(0===a&&(r=!0),n.splice(a,1),o--);return r&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}function m(e,t,n){if(e=c(e),!(this instanceof m))return new m(e,t,n);var r,o,s,l,d,g,b=u.slice(),v=typeof t,y=this,w=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!==typeof n&&(n=i.parse),t=p(t),o=f(e||""),r=!o.protocol&&!o.slashes,y.slashes=o.slashes||r&&t.slashes,y.protocol=o.protocol||t.protocol||"",e=o.rest,o.slashes||(b[3]=[/(.*)/,"pathname"]);w<b.length;w++)l=b[w],"function"!==typeof l?(s=l[0],g=l[1],s!==s?y[g]=e:"string"===typeof s?~(d=e.indexOf(s))&&("number"===typeof l[2]?(y[g]=e.slice(0,d),e=e.slice(d+l[2])):(y[g]=e.slice(d),e=e.slice(0,d))):(d=s.exec(e))&&(y[g]=d[1],e=e.slice(0,d.index)),y[g]=y[g]||r&&l[3]&&t[g]||"",l[4]&&(y[g]=y[g].toLowerCase())):e=l(e);n&&(y.query=n(y.query)),r&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=h(y.pathname,t.pathname)),a(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(l=y.auth.split(":"),y.username=l[0]||"",y.password=l[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}function g(e,t,n){var r=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t)),r[e]=t;break;case"port":r[e]=t,a(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;default:r[e]=t}for(var s=0;s<u.length;s++){var l=u[s];l[4]&&(r[l[1]]=r[l[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function b(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var r=a+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,t="object"===typeof n.query?e(n.query):n.query,t&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}m.prototype={set:g,toString:b},m.extractProtocol=f,m.location=p,m.trimLeft=c,m.qs=i,e.exports=m}).call(this,n("c8ba"))},"1d57":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.label,callback:function(t){e.$set(e.filters,"label",t)},expression:"filters.label"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dict:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dict:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("kt-table",{attrs:{permsEdit:"sys:dict:edit",permsDelete:"sys:dict:delete",data:e.pageResult,columns:e.columns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),n("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.editDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogVisible=t}}},[n("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),n("el-form-item",{attrs:{label:"名称",prop:"label"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.label,callback:function(t){e.$set(e.dataForm,"label",t)},expression:"dataForm.label"}})],1),n("el-form-item",{attrs:{label:"值",prop:"value"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.value,callback:function(t){e.$set(e.dataForm,"value",t)},expression:"dataForm.value"}})],1),n("el-form-item",{attrs:{label:"类型",prop:"type"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.sort,callback:function(t){e.$set(e.dataForm,"sort",t)},expression:"dataForm.sort"}})],1),n("el-form-item",{attrs:{label:"描述 ",prop:"description"}},[n("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.description,callback:function(t){e.$set(e.dataForm,"description",t)},expression:"dataForm.description"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[n("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remarks,callback:function(t){e.$set(e.dataForm,"remarks",t)},expression:"dataForm.remarks"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.editDialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit"))+" ")])],1)],1)],1)},i=[],r=n("c719"),o=n("7a63"),s=n("9158"),l={components:{KtTable:r["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{label:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"label",label:"名称",minWidth:100},{prop:"value",label:"值",minWidth:100},{prop:"type",label:"类型",minWidth:80},{prop:"sort",label:"排序",minWidth:80},{prop:"description",label:"描述",minWidth:120},{prop:"remarks",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,editDialogVisible:!1,editLoading:!1,dataFormRules:{label:[{required:!0,message:"请输入名称",trigger:"blur"}]},dataForm:{id:"",label:"",value:"",type:"",sort:0,description:"",remarks:""}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:"label",value:this.filters.label},this.$api.dict.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.dict.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){this.editDialogVisible=!0,this.operation=!0,this.dataForm={id:"",label:"",value:"",type:"",sort:0,description:"desc",remarks:"remark"}},handleEdit:function(e){this.editDialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.dict.save(t).then((function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.editLoading=!1,e.$refs["dataForm"].resetFields(),e.editDialogVisible=!1,e.findPage(null)}))}))}))},dateFormat:function(e,t){return Object(s["a"])(e[t.property])}},mounted:function(){}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,"65df86ff",null);t["default"]=d.exports},2582:function(e,t,n){"use strict";var a=n("cfe6"),i="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=i.length,n=a.randomBytes(e),r=[],o=0;o<e;o++)r.push(i.substr(n[o]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}}},"26a0":function(e,t,n){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(this,n("c8ba"))},"26e3":function(e,t,n){"use strict";(function(t){var a=n("3fb5"),i=n("9f3a"),r=n("d5e5");e.exports=function(e){function n(t,n){i.call(this,e.transportName,t,n)}return a(n,i),n.enabled=function(n,a){if(!t.document)return!1;var o=r.extend({},a);return o.sameOrigin=!0,e.enabled(o)&&i.enabled()},n.transportName="iframe-"+e.transportName,n.needBody=!0,n.roundTrips=i.roundTrips+e.roundTrips-1,n.facadeTransport=e,n}}).call(this,n("c8ba"))},"28b7":function(e,t,n){"use strict";var a=n("5a0d"),i=n.n(a);i.a},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({staticStyle:{float:"right"},attrs:{size:"mini","current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,n){var a=s(),i=e-a,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var s=Math.easeInOutQuad(c,a,i,t);o(s),c<t?r(e):n&&"function"===typeof n&&n()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(n("28b7"),n("2877")),p=Object(d["a"])(u,a,i,!1,null,"35adf35e",null);t["a"]=p.exports},"345e":function(e,t,n){},"35d6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"机构名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:role:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.content,"max-height":420,size:"mini",align:"left"},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleRoleSelectChange}},[n("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection",width:"50"}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"id",label:"ID",sortable:"",width:"100"}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"机构名称",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"remark",label:"备注",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"createBy",label:"创建人",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"createTime",label:"创建时间",sortable:""}}),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(n){return e.change(t.row)}},model:{value:t.row.status,callback:function(n){e.$set(t.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"185",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{icon:"fa fa-edit",size:"mini"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("编辑")]),n("el-button",{attrs:{icon:"fa fa-trash",size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("删除 ")])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageRequest.total>0,expression:"pageRequest.total>0"}],attrs:{total:e.pageRequest.total,page:e.pageRequest.pageNum,limit:e.pageRequest.pageSize},on:{"update:page":function(t){return e.$set(e.pageRequest,"pageNum",t)},"update:limit":function(t){return e.$set(e.pageRequest,"pageSize",t)},pagination:e.findPage}}),n("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),n("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),n("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[n("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1),n("el-form-item",{attrs:{label:"备注 ",prop:"remark"}},[n("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit"))+" ")])],1)],1),n("div",{staticClass:"menu-container",attrs:{"v-if":!0}},[n("div",{staticClass:"menu-header"},[n("span",[n("B",[e._v("机构菜单授权")])],1)]),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"menuTree",staticStyle:{width:"100%","pading-top":"20px"},attrs:{data:e.menuData,size:"mini","show-checkbox":"","node-key":"id",props:e.defaultProps,"render-content":e.renderContent,"element-loading-text":"拼命加载中","check-strictly":!0},on:{"check-change":e.handleMenuCheckChange}}),n("div",{staticStyle:{float:"left","padding-left":"24px","padding-top":"12px","padding-bottom":"4px"}},[n("el-checkbox",{attrs:{disabled:null==this.selectRole.id},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[n("b",[e._v("全选")])])],1),n("div",{staticStyle:{float:"right","padding-right":"15px","padding-top":"4px","padding-bottom":"4px"}},[n("kt-button",{attrs:{label:e.$t("action.reset"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id},on:{click:e.resetSelection}}),n("kt-button",{attrs:{label:e.$t("action.submit"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id,loading:e.authLoading},on:{click:e.submitAuthForm}})],1)],1)],1)},i=[],r=(n("4160"),n("b0c0"),n("159b"),n("7a63")),o=n("9158"),s=n("333d"),l={name:"org",components:{KtButton:r["a"],Pagination:s["a"]},created:function(){this.findPage()},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"机构名称",minWidth:120},{prop:"remark",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:120},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],loading:!1,pageRequest:{pageNum:1,pageSize:10,total:0},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}]},dataForm:{id:"",name:"",orderNum:0,remark:""},selectRole:{},menuData:[],menuSelections:[],menuLoading:!1,authLoading:!1,checkAll:!1,currentRoleMenus:[],defaultProps:{children:"children",label:""}}},methods:{findPage:function(e){var t=this;this.loading=!0,this.pageRequest.params={name:"",value:this.filters.name},this.$api.org.findPage(this.pageRequest).then((function(e){t.loading=!1,t.pageResult=e.data,t.pageRequest.total=t.pageResult.totalSize,t.pageRequest.pageNum=t.pageResult.pageNum,t.pageRequest.pageSize=t.pageResult.pageSize,t.findTreeData()})).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.role.batchDelete(e.params).then(e.callback)},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:"",name:"",orderNum:0,remark:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.org.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)}))}))}))},findTreeData:function(){var e=this;this.menuLoading=!0,this.$api.menu.findMenuTree().then((function(t){e.menuData=t.data,e.menuLoading=!1}))},handleRoleSelectChange:function(e){var t=this;null!=e&&(this.selectRole=e,this.$api.org.findOrgMenus({orgId:this.selectRole.id}).then((function(e){t.currentRoleMenus=e.data,t.$refs.menuTree.setCheckedNodes(e.data)})))},handleMenuCheckChange:function(e,t,n){var a=this;if(console.log(e),console.log(t),console.log(n),t){var i=e.parentId;null!==i&&this.$refs.menuTree.setChecked(i,!0,!1)}else null!=e.children&&e.children.forEach((function(e){a.$refs.menuTree.setChecked(e.id,!1,!1)}))},resetSelection:function(){this.checkAll=!1,this.$refs.menuTree.setCheckedNodes(this.currentRoleMenus)},handleCheckAll:function(){if(this.checkAll){var e=[];this.checkAllMenu(this.menuData,e),this.$refs.menuTree.setCheckedNodes(e)}else this.$refs.menuTree.setCheckedNodes([])},checkAllMenu:function(e,t){var n=this;e.forEach((function(e){t.push(e),e.children&&n.checkAllMenu(e.children,t)}))},submitAuthForm:function(){var e=this,t=this.selectRole.id;if("admin"!=this.selectRole.name){this.authLoading=!0;var n=this.$refs.menuTree.getCheckedNodes(!1,!0);console.log(n);for(var a=[],i=0,r=n.length;i<r;i++){var o={orgId:t,menuId:n[i].id};a.push(o)}console.log(t),console.log(a),this.$api.org.saveOrgMenus({orgId:t,orgMenus:a}).then((function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.authLoading=!1}))}else this.$message({message:"超级管理员拥有所有菜单权限，不允许修改！",type:"error"})},renderContent:function(e,t){var n=t.node,a=t.data,i=t.store;return console.log(n),console.log(i),e("div",{class:"column-container"},[e("span",{style:"text-algin:center;margin-right:80px;"},[a.name]),e("span",{style:"text-algin:center;margin-right:80px;"},[e("el-tag",{attrs:{type:0===a.type?"":1===a.type?"success":"info",size:"small"}},[0===a.type?"目录":1===a.type?"菜单":"按钮"])]),e("span",{style:"text-algin:center;margin-right:80px;"},[" ",e("i",{class:a.icon})]),e("span",{style:"text-algin:center;margin-right:80px;"},[a.parentName?a.parentName:"顶级菜单"]),e("span",{style:"text-algin:center;margin-right:80px;"},[a.url?a.url:"\t"])])},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(o["a"])(e[t.property])},handleCurrentChange:function(){},handleSelectionChange:function(){},change:function(e){var t=this;this.$api.org.save(e).then((function(e){200==e.code?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.findPage(null)}))}},mounted:function(){}},c=l,u=(n("6cb1"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,"326f7000",null);t["default"]=d.exports},"397f":function(e,t,n){"use strict";var a=n("c282"),i=n("621f"),r=n("3fb5"),o=n("ada0").EventEmitter,s=n("13c0"),l=function(){};function c(e,t,n){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this),l("constructor",e);var r=this,u=i.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new s(this.url,[],n),this.ws.onmessage=function(e){l("message event",e.data),r.emit("message",e.data)},this.unloadRef=a.unloadAdd((function(){l("unload"),r.ws.close()})),this.ws.onclose=function(e){l("close event",e.code,e.reason),r.emit("close",e.code,e.reason),r._cleanup()},this.ws.onerror=function(e){l("error event",e),r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}r(c,o),c.prototype.send=function(e){var t="["+e+"]";l("send",t),this.ws.send(t)},c.prototype.close=function(){l("close");var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){l("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),a.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return l("enabled"),!!s},c.transportName="websocket",c.roundTrips=2,e.exports=c},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"3e1e":function(e,t,n){"use strict";(function(t){var a=n("3fb5"),i=n("7577"),r=n("1548"),o=n("df09"),s=n("73aa"),l=n("26a0");function c(e){if(!s.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",r,o)}a(c,i),c.enabled=function(e){return!e.nullOrigin&&(!l.isOpera()&&o.enabled)},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!t.document,e.exports=c}).call(this,n("c8ba"))},"3e8f":function(e,t){},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},"40b2":function(e,t,n){"use strict";var a=n("3fb5"),i=n("54d6"),r=n("73aa"),o=n("7577");function s(e){if(!i.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/htmlfile",i,r)}a(s,o),s.enabled=function(e){return i.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,e.exports=s},"440d":function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"47e4":function(e,t,n){"use strict";var a=n("3fb5"),i=n("9a83");function r(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}a(r,i),e.exports=r},"486c":function(e,t,n){"use strict";(function(t){n("7725");var a,i=n("1816"),r=n("3fb5"),o=n("930c"),s=n("2582"),l=n("84fc"),c=n("621f"),u=n("c282"),d=n("0040"),p=n("d5e5"),f=n("26a0"),h=n("48cd"),m=n("9a83"),g=n("97a2"),b=n("a0e2"),v=n("e362"),y=n("47e4"),w=n("b9a8"),x=function(){};function k(e,t,n){if(!(this instanceof k))return new k(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=k.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var a=n.sessionId||8;if("function"===typeof a)this._generateSessionId=a;else{if("number"!==typeof a)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(a)}}this._server=n.server||s.numberString(1e3);var r=new i(e);if(!r.host||!r.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(r.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==r.protocol&&"https:"!==r.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+r.protocol+"' is not allowed.");var o="https:"===r.protocol;if("https:"===b.protocol&&!o)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var u=c.getOrigin(b.href);this._origin=u?u.toLowerCase():null,r.set("pathname",r.pathname.replace(/\/+$/,"")),this.url=r.href,x("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:c.isOriginEqual(this.url,b.href),sameScheme:c.isSchemeEqual(this.url,b.href)},this._ir=new w(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function _(e){return 1e3===e||e>=3e3&&e<=4999}r(k,g),k.prototype.close=function(e,t){if(e&&!_(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==k.CLOSING&&this.readyState!==k.CLOSED){var n=!0;this._close(e||1e3,t||"Normal closure",n)}},k.prototype.send=function(e){if("string"!==typeof e&&(e=""+e),this.readyState===k.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===k.OPEN&&this._transport.send(l.quote(e))},k.version=n("1015"),k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._receiveInfo=function(e,t){if(x("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=p.extend(e,this._urlInfo),x("info",e);var n=a.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,x(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},k.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(x("attempt",e.transportName),e.needBody&&(!t.document.body||"undefined"!==typeof t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return x("waiting for body"),this._transports.unshift(e),void u.attachEvent("load",this._connect.bind(this));var n=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n),x("using timeout",n);var a=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName];x("transport url",a);var r=new e(a,this._transUrl,i);return r.on("message",this._transportMessage.bind(this)),r.once("close",this._transportClose.bind(this)),r.transportName=e.transportName,void(this._transport=r)}this._close(2e3,"All transports failed",!1)},k.prototype._transportTimeout=function(){x("_transportTimeout"),this.readyState===k.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},k.prototype._transportMessage=function(e){x("_transportMessage",e);var t,n=this,a=e.slice(0,1),i=e.slice(1);switch(a){case"o":return void this._open();case"h":return this.dispatchEvent(new m("heartbeat")),void x("heartbeat",this.transport)}if(i)try{t=o.parse(i)}catch(r){x("bad json",i)}if("undefined"!==typeof t)switch(a){case"a":Array.isArray(t)&&t.forEach((function(e){x("message",n.transport,e),n.dispatchEvent(new y(e))}));break;case"m":x("message",this.transport,t),this.dispatchEvent(new y(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0);break}else x("empty payload",i)},k.prototype._transportClose=function(e,t){x("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),_(e)||2e3===e||this.readyState!==k.CONNECTING?this._close(e,t):this._connect()},k.prototype._open=function(){x("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===k.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=k.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new m("open")),x("connected",this.transport)):this._close(1006,"Server lost session")},k.prototype._close=function(e,t,n){x("_close",this.transport,e,t,n,this.readyState);var a=!1;if(this._ir&&(a=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===k.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=k.CLOSING,setTimeout(function(){this.readyState=k.CLOSED,a&&this.dispatchEvent(new m("error"));var i=new v("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,x("disconnected")}.bind(this),0)},k.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return a=d(e),n("9fa7")(k,e),k}}).call(this,n("c8ba"))},"488d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"角色名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:role:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("kt-table",{attrs:{permsEdit:"sys:role:edit",permsDelete:"sys:role:delete",highlightCurrentRow:!0,stripe:!1,data:e.pageResult,columns:e.columns,showBatchDelete:!1},on:{handleCurrentChange:e.handleRoleSelectChange,findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),n("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),n("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),n("el-form-item",{attrs:{label:"备注 ",prop:"remark"}},[n("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit"))+" ")])],1)],1),n("div",{staticClass:"menu-container",attrs:{"v-if":!0}},[n("div",{staticClass:"menu-header"},[n("span",[n("B",[e._v("角色菜单授权")])],1)]),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"menuTree",staticStyle:{width:"100%","pading-top":"20px"},attrs:{data:e.menuData,size:"mini","show-checkbox":"","node-key":"id",props:e.defaultProps,"render-content":e.renderContent,"element-loading-text":"拼命加载中","check-strictly":!0},on:{"check-change":e.handleMenuCheckChange}}),n("div",{staticStyle:{float:"left","padding-left":"24px","padding-top":"12px","padding-bottom":"4px"}},[n("el-checkbox",{attrs:{disabled:null==this.selectRole.id},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[n("b",[e._v("全选")])])],1),n("div",{staticStyle:{float:"right","padding-right":"15px","padding-top":"4px","padding-bottom":"4px"}},[n("kt-button",{attrs:{label:e.$t("action.reset"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id},on:{click:e.resetSelection}}),n("kt-button",{attrs:{label:e.$t("action.submit"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id,loading:e.authLoading},on:{click:e.submitAuthForm}})],1)],1)],1)},i=[],r=(n("4160"),n("b0c0"),n("159b"),n("c719")),o=n("7a63"),s=n("9158"),l={components:{KtTable:r["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"角色名",minWidth:120},{prop:"remark",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:120},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}]},dataForm:{id:"",name:"",remark:""},selectRole:{},menuData:[],menuSelections:[],menuLoading:!1,authLoading:!1,checkAll:!1,currentRoleMenus:[],defaultProps:{children:"children",label:""}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:"",value:this.filters.name},this.$api.role.findPage(this.pageRequest).then((function(e){t.pageResult=e.data,t.findTreeData()})).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.role.batchDelete(e.params).then(e.callback)},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:"",name:"",remark:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.role.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)}))}))}))},findTreeData:function(){var e=this;this.menuLoading=!0,this.$api.menu.findMenuTree().then((function(t){e.menuData=t.data,e.menuLoading=!1}))},handleRoleSelectChange:function(e){var t=this;null!=e&&null!=e.val&&(this.selectRole=e.val,this.$api.role.findRoleMenus({roleId:this.selectRole.id}).then((function(e){t.currentRoleMenus=e.data,t.$refs.menuTree.setCheckedNodes(e.data)})))},handleMenuCheckChange:function(e,t,n){var a=this;if(console.log(e),console.log(t),console.log(n),t){var i=e.parentId;null!==i&&this.$refs.menuTree.setChecked(i,!0,!1)}else null!=e.children&&e.children.forEach((function(e){a.$refs.menuTree.setChecked(e.id,!1,!1)}))},resetSelection:function(){this.checkAll=!1,this.$refs.menuTree.setCheckedNodes(this.currentRoleMenus)},handleCheckAll:function(){if(this.checkAll){var e=[];this.checkAllMenu(this.menuData,e),this.$refs.menuTree.setCheckedNodes(e)}else this.$refs.menuTree.setCheckedNodes([])},checkAllMenu:function(e,t){var n=this;e.forEach((function(e){t.push(e),e.children&&n.checkAllMenu(e.children,t)}))},submitAuthForm:function(){var e=this,t=this.selectRole.id;if("admin"!=this.selectRole.name){this.authLoading=!0;var n=this.$refs.menuTree.getCheckedNodes(!1,!0);console.log(n);for(var a=[],i=0,r=n.length;i<r;i++){var o={roleId:t,menuId:n[i].id};a.push(o)}this.$api.role.saveRoleMenus({roleId:t,roleMenus:a}).then((function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.authLoading=!1}))}else this.$message({message:"超级管理员拥有所有菜单权限，不允许修改！",type:"error"})},renderContent:function(e,t){var n=t.node,a=t.data,i=t.store;return console.log(n),console.log(i),e("div",{class:"column-container"},[e("span",{style:"text-algin:center;margin-right:80px;"},[a.name]),e("span",{style:"text-algin:center;margin-right:80px;"},[e("el-tag",{attrs:{type:0===a.type?"":1===a.type?"success":"info",size:"small"}},[0===a.type?"目录":1===a.type?"菜单":"按钮"])]),e("span",{style:"text-algin:center;margin-right:80px;"},[" ",e("i",{class:a.icon})]),e("span",{style:"text-algin:center;margin-right:80px;"},[a.parentName?a.parentName:"顶级菜单"]),e("span",{style:"text-algin:center;margin-right:80px;"},[a.url?a.url:"\t"])])},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(s["a"])(e[t.property])}},mounted:function(){}},c=l,u=(n("17c4"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,"17b72c80",null);t["default"]=d.exports},"48c1":function(e,t,n){(function(){var e,n,a,i,r={}.hasOwnProperty,o=[].slice;e={LF:"\n",NULL:"\0"},a=function(){var t;function n(e,t,n){this.command=e,this.headers=null!=t?t:{},this.body=null!=n?n:""}return n.prototype.toString=function(){var t,a,i,o,s;for(a in t=[this.command],i=!1===this.headers["content-length"],i&&delete this.headers["content-length"],s=this.headers,s)r.call(s,a)&&(o=s[a],t.push(a+":"+o));return this.body&&!i&&t.push("content-length:"+n.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},n.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var a,i,r,o,s,l,c,u,d,p,f,h,m,g,b,v,y;for(o=t.search(RegExp(""+e.LF+e.LF)),s=t.substring(0,o).split(e.LF),r=s.shift(),l={},h=function(e){return e.replace(/^\s+|\s+$/g,"")},v=s.reverse(),m=0,b=v.length;m<b;m++)p=v[m],u=p.indexOf(":"),l[h(p.substring(0,u))]=h(p.substring(u+1));if(a="",f=o+2,l["content-length"])d=parseInt(l["content-length"]),a=(""+t).substring(f,f+d);else for(i=null,c=g=f,y=t.length;f<=y?g<y:g>y;c=f<=y?++g:--g){if(i=t.charAt(c),i===e.NULL)break;a+=i}return new n(r,l,a)},n.unmarshall=function(n){var a;return function(){var i,r,o,s;for(o=n.split(RegExp(""+e.NULL+e.LF+"*")),s=[],i=0,r=o.length;i<r;i++)a=o[i],(null!=a?a.length:void 0)>0&&s.push(t(a));return s}()},n.marshall=function(t,a,i){var r;return r=new n(t,a,i),r.toString()+e.NULL},n}(),n=function(){var t;function n(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return n.prototype.debug=function(e){var t;return"undefined"!==typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},n.prototype._transmit=function(e,t,n){var i;i=a.marshall(e,t,n),"function"===typeof this.debug&&this.debug(">>> "+i);while(1){if(!(i.length>this.maxWebSocketFrameSize))return this.ws.send(i);this.ws.send(i.substring(0,this.maxWebSocketFrameSize)),i=i.substring(this.maxWebSocketFrameSize),"function"===typeof this.debug&&this.debug("remaining = "+i.length)}},n.prototype._setupHeartbeat=function(n){var a,r,o,s,l,c;if((l=n.version)===i.VERSIONS.V1_1||l===i.VERSIONS.V1_2)return c=function(){var e,t,a,i;for(a=n["heart-beat"].split(","),i=[],e=0,t=a.length;e<t;e++)s=a[e],i.push(parseInt(s));return i}(),r=c[0],a=c[1],0!==this.heartbeat.outgoing&&0!==a&&(o=Math.max(this.heartbeat.outgoing,a),"function"===typeof this.debug&&this.debug("send PING every "+o+"ms"),this.pinger=i.setInterval(o,function(t){return function(){return t.ws.send(e.LF),"function"===typeof t.debug?t.debug(">>> PING"):void 0}}(this))),0!==this.heartbeat.incoming&&0!==r?(o=Math.max(this.heartbeat.incoming,r),"function"===typeof this.debug&&this.debug("check PONG every "+o+"ms"),this.ponger=i.setInterval(o,function(e){return function(){var n;if(n=t()-e.serverActivity,n>2*o)return"function"===typeof e.debug&&e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close()}}(this))):void 0},n.prototype._parseConnect=function(){var e,t,n,a;switch(e=1<=arguments.length?o.call(arguments,0):[],a={},e.length){case 2:a=e[0],t=e[1];break;case 3:e[1]instanceof Function?(a=e[0],t=e[1],n=e[2]):(a.login=e[0],a.passcode=e[1],t=e[2]);break;case 4:a.login=e[0],a.passcode=e[1],t=e[2],n=e[3];break;default:a.login=e[0],a.passcode=e[1],t=e[2],n=e[3],a.host=e[4]}return[a,t,n]},n.prototype.connect=function(){var n,r,s,l;return n=1<=arguments.length?o.call(arguments,0):[],l=this._parseConnect.apply(this,n),s=l[0],this.connectCallback=l[1],r=l[2],"function"===typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(n){return function(i){var o,s,l,c,u,d,p,f,h,m,g,b;if(c="undefined"!==typeof ArrayBuffer&&i.data instanceof ArrayBuffer?(o=new Uint8Array(i.data),"function"===typeof n.debug&&n.debug("--- got data length: "+o.length),function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)s=o[e],n.push(String.fromCharCode(s));return n}().join("")):i.data,n.serverActivity=t(),c!==e.LF){for("function"===typeof n.debug&&n.debug("<<< "+c),g=a.unmarshall(c),b=[],h=0,m=g.length;h<m;h++)switch(u=g[h],u.command){case"CONNECTED":"function"===typeof n.debug&&n.debug("connected to server "+u.headers.server),n.connected=!0,n._setupHeartbeat(u.headers),b.push("function"===typeof n.connectCallback?n.connectCallback(u):void 0);break;case"MESSAGE":f=u.headers.subscription,p=n.subscriptions[f]||n.onreceive,p?(l=n,d=u.headers["message-id"],u.ack=function(e){return null==e&&(e={}),l.ack(d,f,e)},u.nack=function(e){return null==e&&(e={}),l.nack(d,f,e)},b.push(p(u))):b.push("function"===typeof n.debug?n.debug("Unhandled received MESSAGE: "+u):void 0);break;case"RECEIPT":b.push("function"===typeof n.onreceipt?n.onreceipt(u):void 0);break;case"ERROR":b.push("function"===typeof r?r(u):void 0);break;default:b.push("function"===typeof n.debug?n.debug("Unhandled frame: "+u):void 0)}return b}"function"===typeof n.debug&&n.debug("<<< PONG")}}(this),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"===typeof e.debug&&e.debug(t),e._cleanUp(),"function"===typeof r?r(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"===typeof e.debug&&e.debug("Web Socket Opened..."),s["accept-version"]=i.VERSIONS.supportedVersions(),s["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",s)}}(this)},n.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"===typeof e?e():void 0},n.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&i.clearInterval(this.pinger),this.ponger)return i.clearInterval(this.ponger)},n.prototype.send=function(e,t,n){return null==t&&(t={}),null==n&&(n=""),t.destination=e,this._transmit("SEND",t,n)},n.prototype.subscribe=function(e,t,n){var a;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=e,this.subscriptions[n.id]=t,this._transmit("SUBSCRIBE",n),a=this,{id:n.id,unsubscribe:function(){return a.unsubscribe(n.id)}}},n.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},n.prototype.begin=function(e){var t,n;return n=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),t=this,{id:n,commit:function(){return t.commit(n)},abort:function(){return t.abort(n)}}},n.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},n.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},n.prototype.ack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("ACK",n)},n.prototype.nack=function(e,t,n){return null==n&&(n={}),n["message-id"]=e,n.subscription=t,this._transmit("NACK",n)},n}(),i={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var a,r;return null==t&&(t=["v10.stomp","v11.stomp"]),a=i.WebSocketClass||WebSocket,r=new a(e,t),new n(r)},over:function(e){return new n(e)},Frame:a},null!==t&&(t.Stomp=i),"undefined"!==typeof window&&null!==window?(i.setInterval=function(e,t){return window.setInterval(t,e)},i.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=i):t||(self.Stomp=i)}).call(this)},"48cd":function(e,t,n){"use strict";(function(t){var n={};["log","debug","warn"].forEach((function(e){var a;try{a=t.console&&t.console[e]&&t.console[e].apply}catch(i){}n[e]=a?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log})),e.exports=n}).call(this,n("c8ba"))},"4b3b":function(e,t,n){var a={"./404":"dc75","./404/":"dc75","./404/index":"dc75","./404/index.vue":"dc75","./Business/Test":"64f3","./Business/Test.vue":"64f3","./Intro/Intro":"326e","./Intro/Intro.vue":"326e","./Sys/Dept":"fa8a","./Sys/Dept.vue":"fa8a","./Sys/Dict":"1d57","./Sys/Dict.vue":"1d57","./Sys/Log":"d9d6","./Sys/Log.vue":"d9d6","./Sys/Loginlog":"bd22","./Sys/Loginlog.vue":"bd22","./Sys/Menu":"d7ab","./Sys/Menu.vue":"d7ab","./Sys/Online":"fea2","./Sys/Online.vue":"fea2","./Sys/Org":"35d6","./Sys/Org.vue":"35d6","./Sys/Role":"488d","./Sys/Role.vue":"488d","./Sys/User":"8e26","./Sys/User.vue":"8e26","./Sys/WebScoket":"d625","./Sys/WebScoket.vue":"d625","./layout":"162e","./layout/":"162e","./layout/components":"38e2","./layout/components/":"38e2","./layout/components/appmain":"9f37","./layout/components/appmain/":"9f37","./layout/components/appmain/index":"9f37","./layout/components/appmain/index.vue":"9f37","./layout/components/headbar":"f9c8","./layout/components/headbar/":"f9c8","./layout/components/headbar/index":"f9c8","./layout/components/headbar/index.vue":"f9c8","./layout/components/index":"38e2","./layout/components/index.js":"38e2","./layout/components/navbar":"583a","./layout/components/navbar/":"583a","./layout/components/navbar/index":"583a","./layout/components/navbar/index.vue":"583a","./layout/index":"162e","./layout/index.vue":"162e","./login":"9ed6","./login/":"9ed6","./login/index":"9ed6","./login/index.vue":"9ed6"};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="4b3b"},"4d10":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table-column",e._b({attrs:{prop:e.prop},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{style:e.childStyles(t.row),on:{click:function(n){return n.preventDefault(),e.toggleHandle(t.$index,t.row)}}},[n("i",{class:e.iconClasses(t.row),style:e.iconStyles(t.row)}),e._v(" "+e._s(t.row[e.prop])+" ")])]}}])},"el-table-column",e.$attrs,!1))},i=[],r=(n("99af"),n("c975"),n("fb6a"),n("a434"),n("6747")),o=n.n(r),s={name:"table-tree-column",props:{prop:{type:String},treeKey:{type:String,default:"id"},parentKey:{type:String,default:"parentId"},levelKey:{type:String,default:"level"},childKey:{type:String,default:"children"}},methods:{childStyles:function(e){return{"padding-left":25*e[this.levelKey]+"px"}},iconClasses:function(e){return[e._expanded?"el-icon-caret-bottom":"el-icon-caret-right"]},iconStyles:function(e){return{visibility:this.hasChild(e)?"visible":"hidden"}},hasChild:function(e){return o()(e[this.childKey])&&e[this.childKey].length>=1||!1},toggleHandle:function(e,t){var n=this;if(this.hasChild(t)){var a=this.$parent.store.states.data.slice(0);a[e]._expanded=!a[e]._expanded,a=a[e]._expanded?a.splice(0,e+1).concat(t[this.childKey]).concat(a):this.removeChildNode(a,t[this.treeKey]),this.$parent.store.commit("setData",a),this.$nextTick((function(){n.$parent.doLayout()}))}},removeChildNode:function(e,t){var n=o()(t)?t:[t];if(t.length<=0)return e;for(var a=[],i=0;i<e.length;i++)-1!==n.indexOf(e[i][this.parentKey])&&-1===n.indexOf(e[i][this.treeKey])&&(a.push(e.splice(i,1)[0][this.treeKey]),i--);return this.removeChildNode(e,a)}}},l=s,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["a"]=u.exports},"54d6":function(e,t,n){"use strict";(function(t){var a=n("3fb5"),i=n("f1f8"),r=n("621f"),o=n("ada0").EventEmitter,s=n("2582"),l=function(){};function c(e){l(e),o.call(this);var n=this;i.polluteGlobalNamespace(),this.id="a"+s.string(6),e=r.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),l("using htmlfile",c.htmlfileEnabled);var a=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){l("start"),n.iframeObj.loaded()},message:function(e){l("message",e),n.emit("message",e)},stop:function(){l("stop"),n._cleanup(),n._close("network")}},this.iframeObj=a(e,(function(){l("callback"),n._cleanup(),n._close("permanent")}))}a(c,o),c.prototype.abort=function(){l("abort"),this._cleanup(),this._close("user")},c.prototype._cleanup=function(){l("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},c.prototype._close=function(e){l("_close",e),this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in t)try{c.htmlfileEnabled=!!new t[u]("htmlfile")}catch(d){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c}).call(this,n("c8ba"))},"5a0d":function(e,t,n){},"621f":function(e,t,n){"use strict";var a=n("1816"),i=function(){};e.exports={getOrigin:function(e){if(!e)return null;var t=new a(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return i("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"63e1":function(e,t,n){"use strict";var a=n("0841"),i=n.n(a);i.a},"64f3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dept:view",type:"primary"},on:{click:function(t){return e.findTreeData(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dept:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini",rowKey:"id","element-loading-text":"$t('action.loading')"}},[n("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"ID"}}),n("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),n("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级机构"}}),n("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),n("el-table-column",{attrs:{prop:"createBy","header-align":"center",align:"center",label:"创建人"}}),n("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",label:"创建时间",formatter:e.dateFormat}}),n("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:dept:edit"},on:{click:function(n){return e.handleEdit(t.row)}}}),n("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:dept:delete",type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}})]}}])})],1),n("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),n("el-form-item",{attrs:{label:"上级机构",prop:"parentName"}},[n("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),2!==e.dataForm.type?n("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[n("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},i=[],r=(n("b0c0"),n("7a63")),o=n("4d10"),s=n("9ce2"),l=n("9158"),c={components:{PopupTreeInput:s["a"],KtButton:r["a"],TableTreeColumn:o["a"]},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,dataForm:{id:0,name:"",parentId:0,parentName:"",orderNum:0},dataRule:{name:[{required:!0,message:"机构名称不能为空",trigger:"blur"}],parentName:[{required:!0,message:"上级机构不能为空",trigger:"change"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.dept.findDeptTree().then((function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1}))},getParentMenuTree:function(e){var t={parentId:0,name:"顶级菜单",children:e};return[t]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:0,name:"",parentId:0,parentName:"",orderNum:0}},handleEdit:function(e){this.dialogVisible=!0,Object.assign(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var n=t.getDeleteIds([],e);t.$api.dept.batchDelete(n).then((function(e){console.log(e),t.findTreeData(),t.$message({message:"删除成功",type:"success"})}))}))},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var n=0,a=t.children.length;n<a;n++)this.getDeleteIds(e,t.children[n]);return e},handleTreeSelectChange:function(e,t){console.log(t),this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},submitForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.dept.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()}))}))}))},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(l["a"])(e[t.property])}},mounted:function(){this.findTreeData()}},u=c,d=n("2877"),p=Object(d["a"])(u,a,i,!1,null,"2c17b572",null);t["default"]=p.exports},6747:function(e,t){var n=Array.isArray;e.exports=n},6787:function(e,t){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},6945:function(e,t,n){"use strict";e.exports=[n("397f"),n("3e1e"),n("b185"),n("7b4d"),n("26e3")(n("7b4d")),n("40b2"),n("26e3")(n("40b2")),n("e2b3"),n("e556"),n("26e3")(n("e2b3")),n("f84c")]},"6cb1":function(e,t,n){"use strict";var a=n("c233"),i=n.n(a);i.a},"73aa":function(e,t,n){"use strict";var a=n("3fb5"),i=n("d8d6");function r(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}a(r,i),r.enabled=i.enabled,e.exports=r},"74d1":function(e,t,n){var a=n("48c1"),i=n("842b");e.exports=a.Stomp,e.exports.overTCP=i.overTCP,e.exports.overWS=i.overWS},7577:function(e,t,n){"use strict";var a=n("3fb5"),i=n("621f"),r=n("f7a9"),o=function(){};function s(e){return function(t,n,a){o("create ajax sender",t,n);var r={};"string"===typeof n&&(r.headers={"Content-type":"text/plain"});var s=i.addPath(t,"/xhr_send"),l=new e("POST",s,n,r);return l.once("finish",(function(e){if(o("finish",e),l=null,200!==e&&204!==e)return a(new Error("http status "+e));a()})),function(){o("abort"),l.close(),l=null;var e=new Error("Aborted");e.code=1e3,a(e)}}}function l(e,t,n,a){r.call(this,e,t,s(a),n,a)}a(l,r),e.exports=l},7725:function(e,t,n){"use strict";var a,i=Array.prototype,r=Object.prototype,o=Function.prototype,s=String.prototype,l=i.slice,c=r.toString,u=function(e){return"[object Function]"===r.toString.call(e)},d=function(e){return"[object Array]"===c.call(e)},p=function(e){return"[object String]"===c.call(e)},f=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();a=f?function(e,t,n,a){!a&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,a){!a&&t in e||(e[t]=n)};var h=function(e,t,n){for(var i in t)r.hasOwnProperty.call(t,i)&&a(e,i,t[i],n)},m=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function g(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function b(e){return e>>>0}function v(){}h(o,{bind:function(e){var t=this;if(!u(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=l.call(arguments,1),a=function(){if(this instanceof s){var a=t.apply(this,n.concat(l.call(arguments)));return Object(a)===a?a:this}return t.apply(e,n.concat(l.call(arguments)))},i=Math.max(0,t.length-n.length),r=[],o=0;o<i;o++)r.push("$"+o);var s=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this, arguments); }")(a);return t.prototype&&(v.prototype=t.prototype,s.prototype=new v,v.prototype=null),s}}),h(Array,{isArray:d});var y=Object("a"),w="a"!==y[0]||!(0 in y),x=function(e){var t=!0,n=!0;return e&&(e.call("foo",(function(e,n,a){"object"!==typeof a&&(t=!1)})),e.call([1],(function(){n="string"===typeof this}),"x")),!!e&&t&&n};h(i,{forEach:function(e){var t=m(this),n=w&&p(this)?this.split(""):t,a=arguments[1],i=-1,r=n.length>>>0;if(!u(e))throw new TypeError;while(++i<r)i in n&&e.call(a,n[i],i,t)}},!x(i.forEach));var k=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);h(i,{indexOf:function(e){var t=w&&p(this)?this.split(""):m(this),n=t.length>>>0;if(!n)return-1;var a=0;for(arguments.length>1&&(a=g(arguments[1])),a=a>=0?a:Math.max(0,n+a);a<n;a++)if(a in t&&t[a]===e)return a;return-1}},k);var _=s.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1];s.split=function(t,n){var a=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==c.call(t))return _.call(this,t,n);var r,o,s,l,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),p=0;t=new RegExp(t.source,d+"g"),a+="",e||(r=new RegExp("^"+t.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:b(n);while(o=t.exec(a)){if(s=o.index+o[0].length,s>p&&(u.push(a.slice(p,o.index)),!e&&o.length>1&&o[0].replace(r,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)})),o.length>1&&o.index<a.length&&i.push.apply(u,o.slice(1)),l=o[0].length,p=s,u.length>=n))break;t.lastIndex===o.index&&t.lastIndex++}return p===a.length?!l&&t.test("")||u.push(""):u.push(a.slice(p)),u.length>n?u.slice(0,n):u}}():"0".split(void 0,0).length&&(s.split=function(e,t){return void 0===e&&0===t?[]:_.call(this,e,t)});var S=s.substr,C="".substr&&"b"!=="0b".substr(-1);h(s,{substr:function(e,t){return S.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},C)},"7a63":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-button",{attrs:{size:e.size,type:e.type,icon:e.icon,loading:e.loading,disabled:!e.hasPerms(e.perms)},on:{click:e.handleClick}},[e._v(" "+e._s(e.label)+" ")])},i=[],r=n("4360");function o(e){for(var t=!1,n=r["a"].state.user.perms,a=0,i=n.length;a<i;a++)if(n[a]===e){t=!0;break}return t}var s={name:"KtButton",props:{label:{type:String,default:"Button"},icon:{type:String,default:""},size:{type:String,default:"mini"},type:{type:String,default:null},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},perms:{type:String,default:null}},data:function(){return{}},methods:{handleClick:function(){this.$emit("click",{})},hasPerms:function(e){return o(e)&!this.disabled}},mounted:function(){}},l=s,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,"8f0bf868",null);t["a"]=u.exports},"7b4d":function(e,t,n){"use strict";var a=n("3fb5"),i=n("7577"),r=n("f91e"),o=n("df09"),s=n("ca34");function l(e){if(!l.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",r,o)}a(l,i),l.enabled=function(){return!!s},l.transportName="eventsource",l.roundTrips=2,e.exports=l},"7c20":function(e,t,n){"use strict";(function(t){var a=n("ada0").EventEmitter,i=n("3fb5"),r=n("930c"),o=n("c282"),s=n("9f3a"),l=n("c529"),c=function(){};function u(e,n){var i=this;a.call(this);var u=function(){var t=i.ifr=new s(l.transportName,n,e);t.once("message",(function(e){if(e){var t;try{t=r.parse(e)}catch(o){return c("bad json",e),i.emit("finish"),void i.close()}var n=t[0],a=t[1];i.emit("finish",n,a)}i.close()})),t.once("close",(function(){i.emit("finish"),i.close()}))};t.document.body?u():o.attachEvent("load",u)}i(u,a),u.enabled=function(){return s.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=u}).call(this,n("c8ba"))},"7e3c":function(e,t,n){var a;try{a=n("6787")}catch(s){}finally{if(a||"undefined"===typeof window||(a=window),!a)throw new Error("Could not determine global this")}var i=a.WebSocket||a.MozWebSocket,r=n("1168");function o(e,t){var n;return n=t?new i(e,t):new i(e),n}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?o:null,version:r}},"842b":function(e,t,n){(function(){var e,a,i,r,o,s;e=n("48c1"),a=n("3e8f"),e.Stomp.setInterval=function(e,t){return setInterval(t,e)},e.Stomp.clearInterval=function(e){return clearInterval(e)},o=function(e,t){var n,i;return n=null,i={url:"tcp:// "+t+":"+e,send:function(e){return n.write(e)},close:function(){return n.end()}},n=a.connect(e,t,(function(e){return i.onopen()})),n.on("error",(function(e){return"function"===typeof i.onclose?i.onclose(e):void 0})),n.on("close",(function(e){return"function"===typeof i.onclose?i.onclose(e):void 0})),n.on("data",(function(e){var t;return t={data:e.toString()},i.onmessage(t)})),i},s=function(e){var t,a,i,r;return t=n("7e3c").client,a=null,r={url:e,send:function(e){return a.sendUTF(e)},close:function(){return a.close()}},i=new t,i.on("connect",(function(e){return a=e,r.onopen(),a.on("error",(function(e){return"function"===typeof r.onclose?r.onclose(e):void 0})),a.on("close",(function(){return"function"===typeof r.onclose?r.onclose():void 0})),a.on("message",(function(e){var t;if("utf8"===e.type)return t={data:e.utf8Data},r.onmessage(t)}))})),i.connect(e),r},i=function(t,n){var a;return a=o(n,t),e.Stomp.over(a)},r=function(t){var n;return n=s(t),e.Stomp.over(n)},t.overTCP=i,t.overWS=r}).call(this)},"84fc":function(e,t,n){"use strict";var a,i=n("930c"),r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,o=function(e){var t,n={},a=[];for(t=0;t<65536;t++)a.push(String.fromCharCode(t));return e.lastIndex=0,a.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n};e.exports={quote:function(e){var t=i.stringify(e);return r.lastIndex=0,r.test(t)?(a||(a=o(r)),t.replace(r,(function(e){return a[e]}))):t}}},"89bc":function(e,t,n){"use strict";var a=n("ada0").EventEmitter,i=n("3fb5"),r=n("930c"),o=n("d5e5"),s=function(){};function l(e,t){a.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var a,l;if(200===e){if(l=+new Date-i,t)try{a=r.parse(t)}catch(c){s("bad json",t)}o.isObject(a)||(a={})}n.emit("finish",a,l),n.removeAllListeners()}))}i(l,a),l.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=l},"8e26":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:user:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[n("el-form",{attrs:{inline:!0,size:e.size}},[n("el-form-item",[n("el-button-group",[n("el-tooltip",{attrs:{content:"刷新",placement:"top"}},[n("el-button",{attrs:{icon:"fa fa-refresh"},on:{click:function(t){return e.findPage(null)}}})],1),n("el-tooltip",{attrs:{content:"列显示",placement:"top"}},[n("el-button",{attrs:{icon:"fa fa-filter"},on:{click:e.displayFilterColumnsDialog}})],1),n("el-tooltip",{attrs:{content:"导出",placement:"top"}},[n("el-button",{attrs:{icon:"fa fa-file-excel-o"}})],1)],1)],1)],1),n("table-column-filter-dialog",{ref:"tableColumnFilterDialog",attrs:{columns:e.columns},on:{handleFilterColumns:e.handleFilterColumns}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.content,"max-height":420,size:"mini",align:"left"},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentChange}},[n("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection",width:"50"}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"id",label:"ID",sortable:"",width:"100"}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"用户名",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"deptName",label:"部门",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"roleNames",label:"角色",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"email",label:"邮箱",sortable:""}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"mobile",label:"手机",sortable:""}}),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(n){return e.change(t.row)}},model:{value:t.row.status,callback:function(n){e.$set(t.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"185",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{icon:"fa fa-edit",size:"mini"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("编辑")]),n("el-button",{attrs:{icon:"fa fa-trash",size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),n("div",{staticClass:"toolbar",staticStyle:{padding:"10px"}},[n("kt-button",{staticStyle:{float:"left"},attrs:{label:e.$t("action.batchDelete"),perms:"sys:user:delete",size:e.size,type:"danger",disabled:0===this.selections.length},on:{click:function(t){return e.handleBatchDelete()}}}),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageRequest.total>0,expression:"pageRequest.total>0"}],attrs:{total:e.pageRequest.total,page:e.pageRequest.pageNum,limit:e.pageRequest.pageSize},on:{"update:page":function(t){return e.$set(e.pageRequest,"pageNum",t)},"update:limit":function(t){return e.$set(e.pageRequest,"pageSize",t)},pagination:e.findPage}})],1),n("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[e._e(),n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),n("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[n("popup-tree-input",{attrs:{data:e.deptData,props:e.deptTreeProps,prop:e.dataForm.deptName,nodeKey:""+e.dataForm.deptId,currentChangeHandle:e.deptTreeCurrentChangeHandle}})],1),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),n("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1),e.operation?e._e():n("el-form-item",{attrs:{label:"角色",prop:"userRoles"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.dataForm.userRoles,callback:function(t){e.$set(e.dataForm,"userRoles",t)},expression:"dataForm.userRoles"}},e._l(e.roles,(function(e){return n("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(" "+e._s(e.$t("action.submit"))+" ")])],1)],1)],1)},i=[],r=(n("d81d"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("9ce2")),o=n("7a63"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"表格显示列",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-table",{ref:"fitlerTable",staticStyle:{width:"100%"},attrs:{data:e.columns,height:"330px","tooltip-effect":"dark","header-align":"left",align:"left",size:e.size},on:{"selection-change":e.selectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),n("el-table-column",{attrs:{label:"属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.prop))]}}])}),n("el-table-column",{attrs:{label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:e.size},model:{value:t.row.label,callback:function(n){e.$set(t.row,"label",n)},expression:"scope.row.label"}})]}}])}),n("el-table-column",{attrs:{label:"最小宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:e.size},model:{value:t.row.minWidth,callback:function(n){e.$set(t.row,"minWidth",n)},expression:"scope.row.minWidth"}})]}}])})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary"},nativeOn:{click:function(t){return e.handleFilterColumns(t)}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)},l=[],c={name:"TableColumnFilterDialog",components:{},props:{columns:{type:Array,default:[]},size:{type:String,default:"mini"}},data:function(){return{selections:[],dialogVisible:!1}},methods:{selectionChange:function(e){this.selections=e},setDialogVisible:function(e){this.dialogVisible=e},handleFilterColumns:function(){for(var e=[],t=0;t<this.columns.length;t++){var n=this.columns[t];this.hasColumn(n)&&e.push(n)}this.$emit("handleFilterColumns",{filterColumns:JSON.parse(JSON.stringify(e))})},hasColumn:function(e){for(var t=0;t<this.selections.length;t++){var n=this.selections[t];if(e.prop==n.prop)return!0}return!1}},mounted:function(){}},u=c,d=n("2877"),p=Object(d["a"])(u,s,l,!1,null,"f40bf1f0",null),f=p.exports,h=n("9158"),m=n("333d"),g={components:{PopupTreeInput:r["a"],KtButton:o["a"],TableColumnFilterDialog:f,Pagination:m["a"]},created:function(){this.findPage()},data:function(){return{size:"small",filters:{name:""},loading:!1,columns:[],filterColumns:[],pageRequest:{pageNum:1,pageSize:10,total:0},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}]},dataForm:{id:"",name:"",password:"",deptId:"",deptName:"",email:"",mobile:"",status:"",userRoles:[]},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],selections:[]}},methods:{findPage:function(e){var t=this;this.loading=!0,this.pageRequest.params={name:this.filters.name},this.$api.user.findPage(this.pageRequest).then((function(e){t.loading=!1,t.pageResult=e.data,t.pageRequest.total=t.pageResult.totalSize,t.pageRequest.pageNum=t.pageResult.pageNum,t.pageRequest.pageSize=t.pageResult.pageSize,t.findRoles()})).then(null!=e?e.callback:"")},findRoles:function(){var e=this;this.$api.role.findAll().then((function(t){e.roles=t.data}))},findUserRoles:function(e){var t=this;this.$api.user.findUserRoles({userId:e.id}).then((function(e){for(var n=e.data,a=[],i=0,r=n.length;i<r;i++)a.push(n[i].roleId);console.log(a),t.dataForm.userRoles=a}))},handleDelete:function(e){this.delete(e.id)},handleBatchDelete:function(){var e=this.selections.map((function(e){return e.id})).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){for(var n=[],a=(e+"").split(","),i=0;i<a.length;i++)n.push({id:a[i]});t.$api.user.batchDelete(n).then((function(e){200==e.code?(t.$message({message:"操作成功",type:"success"}),t.findPage(null)):t.$message({message:"操作失败, "+e.msg,type:"error"})}))}))},handleCurrentChange:function(){},handleSelectionChange:function(e){this.selections=e,console.log(this.selections)},change:function(e){var t=this;this.$api.user.userStatusSwitching(e).then((function(e){t.editLoading=!1,200==e.code?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.findPage(null)}))},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:"",name:"",password:"",deptId:"",deptName:"",email:"",mobile:"",status:"",userRoles:[]}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row),this.findUserRoles(e.row)},submitForm:function(){var e=this;""!=this.dataForm.deptId?this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;for(var t=Object.assign({},e.dataForm),n=[],a=0,i=t.userRoles.length;a<i;a++){var r={userId:t.id,roleId:t.userRoles[a]};n.push(r)}t.userRoles=n,e.$api.user.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)}))}))})):this.$message({message:"请选择所属部门！",type:"error"})},findDeptTree:function(){var e=this;this.$api.dept.findDeptTree().then((function(t){e.deptData=t.data}))},deptTreeCurrentChangeHandle:function(e,t){console.log(t),this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(h["a"])(e[t.property])},displayFilterColumnsDialog:function(){this.$refs.tableColumnFilterDialog.setDialogVisible(!0)},handleFilterColumns:function(e){this.filterColumns=e.filterColumns,this.$refs.tableColumnFilterDialog.setDialogVisible(!1)},initColumns:function(){this.columns=[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"用户名",minWidth:120},{prop:"deptName",label:"部门",minWidth:120},{prop:"roleNames",label:"角色",minWidth:100},{prop:"email",label:"邮箱",minWidth:120},{prop:"mobile",label:"手机",minWidth:100},{prop:"status",label:"状态",minWidth:70}],this.filterColumns=JSON.parse(JSON.stringify(this.columns))}},mounted:function(){this.findDeptTree(),this.initColumns()}},b=g,v=Object(d["a"])(b,a,i,!1,null,"4cba809d",null);t["default"]=v.exports},"930c":function(e,t,n){(function(e,a){var i;/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */(function(){var r=n("3c35"),o={function:!0,object:!0},s=o[typeof t]&&t&&!t.nodeType&&t,l=o[typeof window]&&window||this,c=s&&o[typeof e]&&e&&!e.nodeType&&"object"==typeof a&&a;function u(e,t){e||(e=l.Object()),t||(t=l.Object());var n=e.Number||l.Number,a=e.String||l.String,i=e.Object||l.Object,r=e.Date||l.Date,s=e.SyntaxError||l.SyntaxError,c=e.TypeError||l.TypeError,d=e.Math||l.Math,p=e.JSON||l.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var f,h=i.prototype,m=h.toString,g=h.hasOwnProperty;function b(e,t){try{e()}catch(n){t&&t()}}var v=new r(-0xc782b5b800cec);function y(e){if(null!=y[e])return y[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=y("json-stringify")&&y("date-serialization")&&y("json-parse");else if("date-serialization"==e){if(i=y("json-stringify")&&v,i){var o=t.stringify;b((function(){i='"-271821-04-20T00:00:00.000Z"'==o(new r(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new r(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new r(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new r(-1))}))}}else{var s,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){o=t.stringify;var c="function"==typeof o;c&&((s=function(){return 1}).toJSON=s,b((function(){c="0"===o(0)&&"0"===o(new n)&&'""'==o(new a)&&o(m)===f&&o(f)===f&&o()===f&&"1"===o(s)&&"[1]"==o([s])&&"[null]"==o([f])&&"null"==o(null)&&"[null,null,null]"==o([f,m,null])&&o({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===o(null,s)&&"[\n 1,\n 2\n]"==o([1,2],null,1)}),(function(){c=!1}))),i=c}if("json-parse"==e){var u,d=t.parse;"function"==typeof d&&b((function(){0!==d("0")||d(!1)||(s=d(l),u=5==s["a"].length&&1===s["a"][0],u&&(b((function(){u=!d('"\t"')})),u&&b((function(){u=1!==d("01")})),u&&b((function(){u=1!==d("1.")}))))}),(function(){u=!1})),i=u}}return y[e]=!!i}if(b((function(){v=-109252==v.getUTCFullYear()&&0===v.getUTCMonth()&&1===v.getUTCDate()&&10==v.getUTCHours()&&37==v.getUTCMinutes()&&6==v.getUTCSeconds()&&708==v.getUTCMilliseconds()})),y["bug-string-char-index"]=y["date-serialization"]=y["json"]=y["json-stringify"]=y["json-parse"]=null,!y("json")){var w="[object Function]",x="[object Date]",k="[object Number]",_="[object String]",S="[object Array]",C="[object Boolean]",T=y("bug-string-char-index"),F=function(e,t){var n,a,i,r=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,a=new n,a)g.call(a,i)&&r++;return n=a=null,r?F=function(e,t){var n,a,i=m.call(e)==w;for(n in e)i&&"prototype"==n||!g.call(e,n)||(a="constructor"===n)||t(n);(a||g.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],F=function(e,t){var n,i,r=m.call(e)==w,s=!r&&"function"!=typeof e.constructor&&o[typeof e.hasOwnProperty]&&e.hasOwnProperty||g;for(n in e)r&&"prototype"==n||!s.call(e,n)||t(n);for(i=a.length;n=a[--i];)s.call(e,n)&&t(n)}),F(e,t)};if(!y("json-stringify")&&!y("date-serialization")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},$="000000",O=function(e,t){return($+(t||0)).slice(-e)},N=function(e){var t,n,a,i,r,o,s,l,c;if(v)t=function(e){n=e.getUTCFullYear(),a=e.getUTCMonth(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),l=e.getUTCSeconds(),c=e.getUTCMilliseconds()};else{var u=d.floor,p=[0,31,59,90,120,151,181,212,243,273,304,334],f=function(e,t){return p[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};t=function(e){for(i=u(e/864e5),n=u(i/365.2425)+1970-1;f(n+1,0)<=i;n++);for(a=u((i-f(n,0))/30.42);f(n,a+1)<=i;a++);i=1+i-f(n,a),r=(e%864e5+864e5)%864e5,o=u(r/36e5)%24,s=u(r/6e4)%60,l=u(r/1e3)%60,c=r%1e3}}return N=function(e){return e>-1/0&&e<1/0?(t(e),e=(n<=0||n>=1e4?(n<0?"-":"+")+O(6,n<0?-n:n):O(4,n))+"-"+O(2,a+1)+"-"+O(2,i)+"T"+O(2,o)+":"+O(2,s)+":"+O(2,l)+"."+O(3,c)+"Z",n=a=i=o=s=l=c=null):e=null,e},N(e)};if(y("json-stringify")&&!y("date-serialization")){function R(e){return N(this)}var D=t.stringify;t.stringify=function(e,t,n){var a=r.prototype.toJSON;r.prototype.toJSON=R;var i=D(e,t,n);return r.prototype.toJSON=a,i}}else{var j="\\u00",z=function(e){var t=e.charCodeAt(0),n=E[t];return n||j+O(2,t.toString(16))},I=/[\x00-\x1f\x22\x5c]/g,A=function(e){return I.lastIndex=0,'"'+(I.test(e)?e.replace(I,z):e)+'"'},P=function(e,t,n,a,i,o,s){var l,u,d,p,h,g,v,y,w;if(b((function(){l=t[e]})),"object"==typeof l&&l&&(l.getUTCFullYear&&m.call(l)==x&&l.toJSON===r.prototype.toJSON?l=N(l):"function"==typeof l.toJSON&&(l=l.toJSON(e))),n&&(l=n.call(t,e,l)),l==f)return l===f?l:"null";switch(u=typeof l,"object"==u&&(d=m.call(l)),d||u){case"boolean":case C:return""+l;case"number":case k:return l>-1/0&&l<1/0?""+l:"null";case"string":case _:return A(""+l)}if("object"==typeof l){for(v=s.length;v--;)if(s[v]===l)throw c();if(s.push(l),p=[],y=o,o+=i,d==S){for(g=0,v=l.length;g<v;g++)h=P(g,l,n,a,i,o,s),p.push(h===f?"null":h);w=p.length?i?"[\n"+o+p.join(",\n"+o)+"\n"+y+"]":"["+p.join(",")+"]":"[]"}else F(a||l,(function(e){var t=P(e,l,n,a,i,o,s);t!==f&&p.push(A(e)+":"+(i?" ":"")+t)})),w=p.length?i?"{\n"+o+p.join(",\n"+o)+"\n"+y+"}":"{"+p.join(",")+"}":"{}";return s.pop(),w}};t.stringify=function(e,t,n){var a,i,r,s;if(o[typeof t]&&t)if(s=m.call(t),s==w)i=t;else if(s==S){r={};for(var l,c=0,u=t.length;c<u;)l=t[c++],s=m.call(l),"[object String]"!=s&&"[object Number]"!=s||(r[l]=1)}if(n)if(s=m.call(n),s==k){if((n-=n%1)>0)for(n>10&&(n=10),a="";a.length<n;)a+=" "}else s==_&&(a=n.length<=10?n:n.slice(0,10));return P("",(l={},l[""]=e,l),i,r,a,"",[])}}}if(!y("json-parse")){var L,q,W=a.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},B=function(){throw L=q=null,s()},U=function(){var e,t,n,a,i,r=q,o=r.length;while(L<o)switch(i=r.charCodeAt(L),i){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=T?r.charAt(L):r[L],L++,e;case 34:for(e="@",L++;L<o;)if(i=r.charCodeAt(L),i<32)B();else if(92==i)switch(i=r.charCodeAt(++L),i){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[i],L++;break;case 117:for(t=++L,n=L+4;L<n;L++)i=r.charCodeAt(L),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||B();e+=W("0x"+r.slice(t,L));break;default:B()}else{if(34==i)break;i=r.charCodeAt(L),t=L;while(i>=32&&92!=i&&34!=i)i=r.charCodeAt(++L);e+=r.slice(t,L)}if(34==r.charCodeAt(L))return L++,e;B();default:if(t=L,45==i&&(a=!0,i=r.charCodeAt(++L)),i>=48&&i<=57){for(48==i&&(i=r.charCodeAt(L+1),i>=48&&i<=57)&&B(),a=!1;L<o&&(i=r.charCodeAt(L),i>=48&&i<=57);L++);if(46==r.charCodeAt(L)){for(n=++L;n<o;n++)if(i=r.charCodeAt(n),i<48||i>57)break;n==L&&B(),L=n}if(i=r.charCodeAt(L),101==i||69==i){for(i=r.charCodeAt(++L),43!=i&&45!=i||L++,n=L;n<o;n++)if(i=r.charCodeAt(n),i<48||i>57)break;n==L&&B(),L=n}return+r.slice(t,L)}a&&B();var s=r.slice(L,L+4);if("true"==s)return L+=4,!0;if("fals"==s&&101==r.charCodeAt(L+4))return L+=5,!1;if("null"==s)return L+=4,null;B()}return"$"},V=function(e){var t,n;if("$"==e&&B(),"string"==typeof e){if("@"==(T?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];;){if(e=U(),"]"==e)break;n?","==e?(e=U(),"]"==e&&B()):B():n=!0,","==e&&B(),t.push(V(e))}return t}if("{"==e){for(t={};;){if(e=U(),"}"==e)break;n?","==e?(e=U(),"}"==e&&B()):B():n=!0,","!=e&&"string"==typeof e&&"@"==(T?e.charAt(0):e[0])&&":"==U()||B(),t[e.slice(1)]=V(U())}return t}B()}return e},K=function(e,t,n){var a=J(e,t,n);a===f?delete e[t]:e[t]=a},J=function(e,t,n){var a,i=e[t];if("object"==typeof i&&i)if(m.call(i)==S)for(a=i.length;a--;)K(m,F,i,a,n);else F(i,(function(e){K(i,e,n)}));return n.call(e,t,i)};t.parse=function(e,t){var n,a;return L=0,q=""+e,n=V(U()),"$"!=U()&&B(),L=q=null,t&&m.call(t)==w?J((a={},a[""]=n,a),"",t):n}}}return t.runInContext=u,t}if(!c||c.global!==c&&c.window!==c&&c.self!==c||(l=c),s&&!r)u(l,s);else{var d=l.JSON,p=l.JSON3,f=!1,h=u(l,l.JSON3={noConflict:function(){return f||(f=!0,l.JSON=d,l.JSON3=p,d=p=null),h}});l.JSON={parse:h.parse,stringify:h.stringify}}r&&(i=function(){return h}.call(t,n,t,e),void 0===i||(e.exports=i))}).call(this)}).call(this,n("62e4")(e),n("c8ba"))},"97a2":function(e,t,n){"use strict";function a(){this._listeners={}}a.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},a.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var a=n.indexOf(t);-1===a||(n.length>1?this._listeners[e]=n.slice(0,a).concat(n.slice(a+1)):delete this._listeners[e])}},a.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var a=this._listeners[t],i=0;i<a.length;i++)a[i].apply(this,n)},e.exports=a},"9a83":function(e,t,n){"use strict";function a(e){this.type=e}a.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},a.prototype.stopPropagation=function(){},a.prototype.preventDefault=function(){},a.CAPTURING_PHASE=1,a.AT_TARGET=2,a.BUBBLING_PHASE=3,e.exports=a},"9c59":function(e,t,n){"use strict";var a,i=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function o(e){var t,n=/([^=?&]+)=?([^&]*)/g,a={};while(t=n.exec(e)){var i=r(t[1]),o=r(t[2]);null===i||null===o||i in a||(a[i]=o)}return a}function s(e,t){t=t||"";var n,r,o=[];for(r in"string"!==typeof t&&(t="?"),e)if(i.call(e,r)){if(n=e[r],n||null!==n&&n!==a&&!isNaN(n)||(n=""),r=encodeURIComponent(r),n=encodeURIComponent(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?t+o.join("&"):""}t.stringify=s,t.parse=o},"9ce2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-popover",{ref:"popover",attrs:{placement:e.placement,trigger:"click"}},[n("el-tree",{ref:"popupTree",attrs:{data:e.data,props:e.props,"node-key":"nodeKey","default-expand-all":e.defaultExpandAll,"highlight-current":!0,"expand-on-click-node":!0},on:{"current-change":e.currentChangeHandle}})],1),n("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticStyle:{cursor:"pointer"},attrs:{readonly:!0,placeholder:e.placeholder},model:{value:e.prop,callback:function(t){e.prop=t},expression:"prop"}})],1)},i=[],r={name:"PopupTreeInput",props:{data:{type:Array,default:[]},props:{type:Object,default:{}},prop:{type:String,default:""},nodeKey:{type:String,default:""},placeholder:{type:String,default:"点击选择内容"},placement:{type:String,default:"right-start"},defaultExpandAll:{type:Boolean,default:!1},currentChangeHandle:{type:Function,default:null}}},o=r,s=n("2877"),l=Object(s["a"])(o,a,i,!1,null,"08f36721",null);t["a"]=l.exports},"9d7d":function(e,t,n){"use strict";(function(t){var a=n("ada0").EventEmitter,i=n("3fb5"),r=n("c282"),o=n("26a0"),s=n("621f"),l=function(){};function c(e,t,n){l(e,t);var i=this;a.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(c,a),c.prototype._start=function(e,n,a){l("_start");var i=this,o=new t.XDomainRequest;n=s.addQuery(n,"t="+ +new Date),o.onerror=function(){l("onerror"),i._error()},o.ontimeout=function(){l("ontimeout"),i._error()},o.onprogress=function(){l("progress",o.responseText),i.emit("chunk",200,o.responseText)},o.onload=function(){l("load"),i.emit("finish",200,o.responseText),i._cleanup(!1)},this.xdr=o,this.unloadRef=r.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(a)}catch(c){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(l("cleanup",e),this.xdr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){l("close"),this._cleanup(!0)},c.enabled=!(!t.XDomainRequest||!o.hasDomain()),e.exports=c}).call(this,n("c8ba"))},"9f3a":function(e,t,n){"use strict";var a=n("3fb5"),i=n("930c"),r=n("ada0").EventEmitter,o=n("1015"),s=n("621f"),l=n("f1f8"),c=n("c282"),u=n("2582"),d=function(){};function p(e,t,n){if(!p.enabled())throw new Error("Transport created when disabled");r.call(this);var a=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=u.string(8);var i=s.addPath(n,"/iframe.html")+"#"+this.windowId;d(e,t,i),this.iframeObj=l.createIframe(i,(function(e){d("err callback"),a.emit("close",1006,"Unable to load an iframe ("+e+")"),a.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}a(p,r),p.prototype.close=function(){if(d("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},p.prototype._message=function(e){if(d("message",e.data),s.isOriginEqual(e.origin,this.origin)){var t;try{t=i.parse(e.data)}catch(a){return void d("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=i.parse(t.data)}catch(a){return void d("bad json",t.data)}this.emit("close",n[0],n[1]),this.close();break}else d("mismatched window id",t.windowId,this.windowId)}else d("not same origin",e.origin,this.origin)},p.prototype.postMessage=function(e,t){d("postMessage",e,t),this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},p.prototype.send=function(e){d("send",e),this.postMessage("m",e)},p.enabled=function(){return l.iframeEnabled},p.transportName="iframe",p.roundTrips=2,e.exports=p},"9fa7":function(e,t,n){"use strict";var a=n("621f"),i=n("c282"),r=n("930c"),o=n("bb31"),s=n("c529"),l=n("f1f8"),c=n("a0e2"),u=function(){};e.exports=function(e,t){var n,d={};t.forEach((function(e){e.facadeTransport&&(d[e.facadeTransport.transportName]=e.facadeTransport)})),d[s.transportName]=s,e.bootstrap_iframe=function(){var t;l.currentWindowId=c.hash.slice(1);var s=function(i){if(i.source===parent&&("undefined"===typeof n&&(n=i.origin),i.origin===n)){var s;try{s=r.parse(i.data)}catch(b){return void u("bad json",i.data)}if(s.windowId===l.currentWindowId)switch(s.type){case"s":var p;try{p=r.parse(s.data)}catch(b){u("bad json",s.data);break}var f=p[0],h=p[1],m=p[2],g=p[3];if(u(f,h,m,g),f!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+f+'", the iframe: "'+e.version+'".');if(!a.isOriginEqual(m,c.href)||!a.isOriginEqual(g,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+m+", "+g+")");t=new o(new d[h](m,g));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null;break}}};i.attachEvent("message",s),l.postMessage("s")}}},a0e2:function(e,t,n){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,n("c8ba"))},a434:function(e,t,n){"use strict";var a=n("23e7"),i=n("23cb"),r=n("a691"),o=n("50c4"),s=n("7b0b"),l=n("65f0"),c=n("8418"),u=n("1dde"),d=n("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var n,a,u,d,p,f,v=s(this),y=o(v.length),w=i(e,y),x=arguments.length;if(0===x?n=a=0:1===x?(n=0,a=y-w):(n=x-2,a=m(h(r(t),0),y-w)),y+n-a>g)throw TypeError(b);for(u=l(v,a),d=0;d<a;d++)p=w+d,p in v&&c(u,d,v[p]);if(u.length=a,n<a){for(d=w;d<y-a;d++)p=d+a,f=d+n,p in v?v[f]=v[p]:delete v[f];for(d=y;d>y-a+n;d--)delete v[d-1]}else if(n>a)for(d=y-a;d>w;d--)p=d+a-1,f=d+n-1,p in v?v[f]=v[p]:delete v[f];for(d=0;d<n;d++)v[d+w]=arguments[d+2];return v.length=y-a+n,u}})},ada0:function(e,t,n){"use strict";var a=n("3fb5"),i=n("97a2");function r(){i.call(this)}a(r,i),r.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},r.prototype.once=function(e,t){var n=this,a=!1;function i(){n.removeListener(e,i),a||(a=!0,t.apply(this,arguments))}this.on(e,i)},r.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,a=new Array(n-1),i=1;i<n;i++)a[i-1]=arguments[i];for(var r=0;r<t.length;r++)t[r].apply(this,a)}},r.prototype.on=r.prototype.addListener=i.prototype.addEventListener,r.prototype.removeListener=i.prototype.removeEventListener,e.exports.EventEmitter=r},b185:function(e,t,n){"use strict";var a=n("3fb5"),i=n("7577"),r=n("1548"),o=n("9d7d");function s(e){if(!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",r,o)}a(s,i),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(o.enabled&&e.sameScheme)},s.transportName="xdr-streaming",s.roundTrips=2,e.exports=s},b9a8:function(e,t,n){"use strict";var a=n("ada0").EventEmitter,i=n("3fb5"),r=n("621f"),o=n("9d7d"),s=n("df09"),l=n("73aa"),c=n("f701"),u=n("7c20"),d=n("89bc"),p=function(){};function f(e,t){p(e);var n=this;a.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(f,a),f._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,l):s.enabled?new d(t,s):o.enabled&&n.sameScheme?new d(t,o):u.enabled()?new u(e,t):new d(t,c)},f.prototype.doXhr=function(e,t){var n=this,a=r.addPath(e,"/info");p("doXhr",a),this.xo=f._getReceiver(e,a,t),this.timeoutRef=setTimeout((function(){p("timeout"),n._cleanup(!1),n.emit("finish")}),f.timeout),this.xo.once("finish",(function(e,t){p("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)}))},f.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},f.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},f.timeout=8e3,e.exports=f},ba0c:function(e){e.exports=JSON.parse('{"_from":"websocket@latest","_id":"websocket@1.0.31","_inBundle":false,"_integrity":"sha1-5dDxbDNA7YdnDkieyuYUTHk1hzA=","_location":"/websocket","_phantomChildren":{},"_requested":{"type":"tag","registry":true,"raw":"websocket@latest","name":"websocket","escapedName":"websocket","rawSpec":"latest","saveSpec":null,"fetchSpec":"latest"},"_requiredBy":["/stompjs"],"_resolved":"https://registry.npm.taobao.org/websocket/download/websocket-1.0.31.tgz","_shasum":"e5d0f16c3340ed87670e489ecae6144c79358730","_spec":"websocket@latest","_where":"/Users/longlong/working/frontend/pie-ui/node_modules/stompjs","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"bundleDependencies":false,"config":{"verbose":false},"contributors":[{"name":"Iñaki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"debug":"^2.2.0","es5-ext":"^0.10.50","nan":"^2.14.0","typedarray-to-buffer":"^3.1.5","yaeti":"^0.0.6"},"deprecated":false,"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","faucet":"^0.0.1","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=0.10.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","install":"(node-gyp rebuild 2> builderror.log) || (exit 0)","test":"faucet test/unit"},"version":"1.0.31"}')},bb31:function(e,t,n){"use strict";var a=n("930c"),i=n("f1f8");function r(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}r.prototype._transportClose=function(e,t){i.postMessage("c",a.stringify([e,t]))},r.prototype._transportMessage=function(e){i.postMessage("t",e)},r.prototype._send=function(e){this._transport.send(e)},r.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=r},bd22:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:loginlog:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1)],1)],1),n("kt-table",{attrs:{data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},i=[],r=(n("b0c0"),n("c719")),o=n("7a63"),s=n("9158"),l={components:{KtTable:r["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"status",label:"状态",minWidth:120},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:this.filters.name},this.$api.loginlog.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(s["a"])(e[t.property])}},mounted:function(){}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,"05662083",null);t["default"]=d.exports},bf4a:function(e,t,n){"use strict";(function(t){var a,i,r=n("2582"),o=n("621f"),s=function(){};function l(e){s("createIframe",e);try{return t.document.createElement('<iframe name="'+e+'">')}catch(a){var n=t.document.createElement("iframe");return n.name=e,n}}function c(){s("createForm"),a=t.document.createElement("form"),a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",i=t.document.createElement("textarea"),i.name="d",a.appendChild(i),t.document.body.appendChild(a)}e.exports=function(e,t,n){s(e,t),a||c();var u="a"+r.string(8);a.target=u,a.action=o.addQuery(o.addPath(e,"/jsonp_send"),"i="+u);var d=l(u);d.id=u,d.style.display="none",a.appendChild(d);try{i.value=t}catch(f){}a.submit();var p=function(e){s("completed",u,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout((function(){s("cleaning up",u),d.parentNode.removeChild(d),d=null}),500),i.value="",n(e))};return d.onerror=function(){s("onerror",u),p()},d.onload=function(){s("onload",u),p()},d.onreadystatechange=function(e){s("onreadystatechange",u,d.readyState,e),"complete"===d.readyState&&p()},function(){s("aborted",u),p(new Error("Aborted"))}}}).call(this,n("c8ba"))},c233:function(e,t,n){},c282:function(e,t,n){"use strict";(function(t){var a=n("2582"),i={},r=!1,o=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,n){"undefined"!==typeof t.addEventListener?t.addEventListener(e,n,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,n),t.attachEvent("on"+e,n))},detachEvent:function(e,n){"undefined"!==typeof t.addEventListener?t.removeEventListener(e,n,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,n),t.detachEvent("on"+e,n))},unloadAdd:function(e){if(o)return null;var t=a.string(8);return i[t]=e,r&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}};var s=function(){r||(r=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",s)}).call(this,n("c8ba"))},c529:function(e,t,n){"use strict";var a=n("3fb5"),i=n("ada0").EventEmitter,r=n("930c"),o=n("73aa"),s=n("89bc");function l(e){var t=this;i.call(this),this.ir=new s(e,o),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",r.stringify([e,n]))}))}a(l,i),l.transportName="iframe-info-receiver",l.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=l},c719:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.content,"highlight-current-row":e.highlightCurrentRow,"element-loading-text":e.$t("action.loading"),border:e.border,stripe:e.stripe,"show-overflow-tooltip":e.showOverflowTooltip,"max-height":e.maxHeight,size:e.size,align:e.align},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[e.showBatchDelete&e.showOperation?n("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e._l(e.columns,(function(e){return n("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type,formatter:e.formatter,sortable:null==e.sortable||e.sortable}})})),e.showOperation?n("el-table-column",{attrs:{label:e.$t("action.operation"),width:"185",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:e.permsEdit,size:e.size},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}}),n("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:e.permsDelete,size:e.size,type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})]}}],null,!1,2053442660)}):e._e()],2),n("div",{staticClass:"toolbar",staticStyle:{padding:"10px"}},[e.showBatchDelete&e.showOperation?n("kt-button",{staticStyle:{float:"left"},attrs:{label:e.$t("action.batchDelete"),perms:e.permsDelete,size:e.size,type:"danger",disabled:0===this.selections.length},on:{click:function(t){return e.handleBatchDelete()}}}):e._e(),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.pageNum,"page-size":e.pageRequest.pageSize,total:e.data.totalSize},on:{"current-change":e.refreshPageRequest}})],1)],1)},i=[],r=(n("d81d"),n("a9e3"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("7a63")),o={name:"KtTable",components:{KtButton:r["a"]},props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,size:{type:String,default:"mini"},align:{type:String,default:"left"},maxHeight:{type:Number,default:420},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{pageNum:1,pageSize:10},loading:!1,selections:[]}},methods:{findPage:function(){var e=this;this.loading=!0;var t=function(t){console.log(t),e.loading=!1};this.$emit("findPage",{pageRequest:this.pageRequest,callback:t})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.pageNum=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map((function(e){return e.id})).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){for(var n=[],a=(e+"").split(","),i=0;i<a.length;i++)n.push({id:a[i]});t.loading=!0;var r=function(e){200==e.code?(t.$message({message:"删除成功",type:"success"}),t.findPage()):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.loading=!1};t.$emit("handleDelete",{params:n,callback:r})})).catch((function(){}))}},mounted:function(){this.refreshPageRequest(1)}},s=o,l=n("2877"),c=Object(l["a"])(s,a,i,!1,null,"2ff7d104",null);t["a"]=c.exports},ca34:function(e,t,n){(function(t){e.exports=t.EventSource}).call(this,n("c8ba"))},cc7d:function(e,t,n){"use strict";(function(t){var a=n("6945");e.exports=n("486c")(a),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this,n("c8ba"))},cfe6:function(e,t,n){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,n("c8ba"))},d5e5:function(e,t,n){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,a=1,i=arguments.length;a<i;a++)for(n in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},d625:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("webscoket")]),n("el-row",[n("el-button",{on:{click:function(t){return e.initWebSocket()}}},[e._v("开始连接")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.disconnect()}}},[e._v("断开连接")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.send()}}},[e._v("发送消息")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.sendTopic()}}},[e._v("广播")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.sendAllUser()}}},[e._v("像所有人说话")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.sendTopic()}}},[e._v("像指定的人说话")]),n("el-input",{model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),n("el-row",[n("el-input",{attrs:{type:"textarea"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1)},i=[],r=n("cc7d"),o=n.n(r),s=n("74d1"),l=n.n(s),c=n("cd3f"),u={data:function(){return{input:"",message:"",dataList:[]}},mounted:function(){},beforeDestroy:function(){this.disconnect(),clearInterval(this.timer)},methods:{initWebSocket:function(){this.connection();var e=this;this.timer=setInterval((function(){try{e.stompClient.send("test")}catch(t){console.log("断线了: "+t),e.connection()}}),5e3)},removeTab:function(e){console.log(e)},connection:function(){var e=this;this.socket=new o.a("http://127.0.0.1:8081/myUrl?token="+Object(c["a"])()),this.stompClient=l.a.over(this.socket);var t={login:"mylogin",passcode:"mypasscode","client-id":"my-client-id"};this.stompClient.connect(t,(function(){e.stompClient.subscribe("/user/queue/sendUser",(function(e){console.log(e.body)})),e.stompClient.subscribe("/topic/sendTopic",(function(e){console.log(e)})),console.log("连接成功")}),(function(e){console.log("连接失败"),console.log(e)}))},disconnect:function(){null!=this.stompClient&&(this.stompClient.disconnect(),console.log("Disconnected"))},send:function(){this.stompClient.send("/sendUser",{},JSON.stringify({name:"SuperAdmin"}))},sendTopic:function(){this.stompClient.send("/sendTopic")},sendAllUser:function(){this.$api.webscoket.sendAllUser({message:"大家早上好"})}}},d=u,p=n("2877"),f=Object(p["a"])(d,a,i,!1,null,null,null);t["default"]=f.exports},d7ab:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:menu:view",type:"primary"},on:{click:function(t){return e.findTreeData(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:menu:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini",rowKey:"id","element-loading-text":"$t('action.loading')"}},[n("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"120",label:"ID"}}),n("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("i",{class:e.row.icon||""})]}}])}),n("el-table-column",{attrs:{prop:"type","header-align":"center",align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?n("el-tag",{attrs:{size:"small"}},[e._v("目录")]):1===t.row.type?n("el-tag",{attrs:{size:"small",type:"success"}},[e._v("菜单")]):2===t.row.type?n("el-tag",{attrs:{size:"small",type:"info"}},[e._v("按钮")]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级菜单"}}),n("el-table-column",{attrs:{prop:"url","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"菜单URL"}}),n("el-table-column",{attrs:{prop:"perms","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"授权标识"}}),n("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),n("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:menu:edit"},on:{click:function(n){return e.handleEdit(t.row)}}}),n("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:menu:delete",type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}})]}}])})],1),n("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[n("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[n("el-radio-group",{model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.menuTypeList,(function(t,a){return n("el-radio",{key:a,attrs:{label:a}},[e._v(e._s(t))])})),1)],1),n("el-form-item",{attrs:{label:e.menuTypeList[e.dataForm.type]+"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:e.menuTypeList[e.dataForm.type]+"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),n("el-form-item",{attrs:{label:"上级菜单",prop:"parentName"}},[n("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName||""==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),0!==e.dataForm.type?n("el-form-item",{attrs:{label:"授权标识",prop:"perms"}},[n("el-input",{attrs:{placeholder:"如: sys:user:add, sys:user:edit, sys:user:delete"},model:{value:e.dataForm.perms,callback:function(t){e.$set(e.dataForm,"perms",t)},expression:"dataForm.perms"}})],1):e._e(),1===e.dataForm.type?n("el-form-item",{attrs:{label:"菜单路由",prop:"url"}},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{placeholder:"菜单路由"},model:{value:e.dataForm.url,callback:function(t){e.$set(e.dataForm,"url",t)},expression:"dataForm.url"}})],1),n("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[n("el-tooltip",{staticStyle:{padding:"10px"},attrs:{placement:"top",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("URL格式：")]),n("p",[e._v("1.常规业务开发的功能URL，如用户管理，Views目录下页面路径为 /Sys/User, 此处填写 /sys/user。")]),n("p",[e._v("2.嵌套外部网页，如通过菜单打开百度网页，此处填写 http://www.baidu.com，http:// 不可省略。")]),n("p",[e._v("示例：用户管理：/sys/user 嵌套百度：http://www.baidu.com 嵌套网页：http://127.0.0.1:8000")])]),n("i",{staticClass:"el-icon-warning"})])],1)],1)],1):e._e(),2!==e.dataForm.type?n("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[n("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e(),2!==e.dataForm.type?n("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[n("el-row",[n("el-col",{attrs:{span:22}},[n("el-popover",{ref:"iconListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"mod-menu__icon-popover"}},[n("div",{staticClass:"mod-menu__icon-list"},e._l(e.dataForm.iconList,(function(t,a){return n("el-button",{key:a,class:{"is-active":t===e.dataForm.icon},on:{click:function(n){return e.iconActiveHandle(t)}}},[n("icon-svg",{attrs:{name:t}})],1)})),1)]),n("el-input",{directives:[{name:"popover",rawName:"v-popover:iconListPopover",arg:"iconListPopover"}],staticClass:"icon-list__input",attrs:{readonly:!1,placeholder:"菜单图标名称（如：fa fa-home fa-lg）"},model:{value:e.dataForm.icon,callback:function(t){e.$set(e.dataForm,"icon",t)},expression:"dataForm.icon"}})],1),n("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[n("fa-icon-tooltip")],1)],1)],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},i=[],r=(n("b0c0"),n("7a63")),o=n("4d10"),s=n("9ce2"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tooltip",{staticClass:"tooltip",attrs:{placement:"top",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("推荐使用 Font Aweson 图标")]),n("p",[e._v("使用步骤：")]),n("p",[e._v("1.进入 "),n("a",{attrs:{href:"http://www.fontawesome.com.cn/faicons/",target:"_blank"}},[e._v("Font Aweson")]),e._v(" 页面")]),n("p",[e._v("2.查找到需要的图标,点击查看。")]),n("p",[e._v("3.复制图片样式到此处。")]),n("p",[e._v("示例：fa fa-home fa-lg")])]),n("i",{staticClass:"el-icon-warning"})])},c=[],u={data:function(){return{}},methods:{},mounted:function(){}},d=u,p=(n("63e1"),n("2877")),f=Object(p["a"])(d,l,c,!1,null,"5d81ed18",null),h=f.exports,m={components:{PopupTreeInput:s["a"],KtButton:r["a"],TableTreeColumn:o["a"],FaIconTooltip:h},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,menuTypeList:["目录","菜单","按钮"],dataForm:{id:"",type:1,name:"",parentId:0,parentName:"",url:"",perms:"",orderNum:0,icon:"",iconList:[]},dataRule:{name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.menu.findMenuTree().then((function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1}))},getParentMenuTree:function(e){var t={parentId:0,name:"顶级菜单",children:e};return[t]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:"",type:1,typeList:["目录","菜单","按钮"],name:"",parentId:0,parentName:"",url:"",perms:"",orderNum:0,icon:"",iconList:[]}},handleEdit:function(e){this.dialogVisible=!0,Object.assign(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var n=t.getDeleteIds([],e);t.$api.menu.batchDelete(n).then((function(e){console.log(e),t.findTreeData(),t.$message({message:"删除成功",type:"success"})}))}))},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var n=0,a=t.children.length;n<a;n++)this.getDeleteIds(e,t.children[n]);return e},handleTreeSelectChange:function(e){this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},iconActiveHandle:function(e){this.dataForm.icon=e},submitForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.menu.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.$refs["dataForm"].resetFields(),e.dialogVisible=!1):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()}))}))}))}},mounted:function(){this.findTreeData()}},g=m,b=Object(p["a"])(g,a,i,!1,null,"60c3b622",null);t["default"]=b.exports},d81d:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").map,r=n("1dde"),o=n("ae40"),s=r("map"),l=o("map");a({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d8d6:function(e,t,n){"use strict";(function(t){var a=n("ada0").EventEmitter,i=n("3fb5"),r=n("c282"),o=n("621f"),s=t.XMLHttpRequest,l=function(){};function c(e,t,n,i){l(e,t);var r=this;a.call(this),setTimeout((function(){r._start(e,t,n,i)}),0)}i(c,a),c.prototype._start=function(e,t,n,a){var i=this;try{this.xhr=new s}catch(d){}if(!this.xhr)return l("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=o.addQuery(t,"t="+ +new Date),this.unloadRef=r.unloadAdd((function(){l("unload cleanup"),i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){l("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(p){return l("exception",p),this.emit("finish",0,""),void this._cleanup(!1)}if(a&&a.noCredentials||!c.supportsCORS||(l("withCredentials"),this.xhr.withCredentials=!0),a&&a.headers)for(var u in a.headers)this.xhr.setRequestHeader(u,a.headers[u]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(l("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(p){}l("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(l("chunk"),i.emit("chunk",t,e));break;case 4:t=n.status,l("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),l("finish",t,n.responseText),i.emit("finish",t,n.responseText),i._cleanup(!1);break}}};try{i.xhr.send(n)}catch(p){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(l("cleanup"),this.xhr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){l("close"),this._cleanup(!0)},c.enabled=!!s;var u=["Active"].concat("Object").join("X");!c.enabled&&u in t&&(l("overriding xmlhttprequest"),s=function(){try{return new t[u]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new s);var d=!1;try{d="withCredentials"in new s}catch(p){}c.supportsCORS=d,e.exports=c}).call(this,n("c8ba"))},d9d6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:log:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1)],1)],1),n("kt-table",{attrs:{data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},i=[],r=(n("b0c0"),n("c719")),o=n("7a63"),s=n("9158"),l={components:{KtTable:r["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"operation",label:"操作",minWidth:120},{prop:"method",label:"方法",minWidth:180},{prop:"params",label:"参数",minWidth:220},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:this.filters.name},this.$api.log.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(s["a"])(e[t.property])}},mounted:function(){}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,"253005b7",null);t["default"]=d.exports},df09:function(e,t,n){"use strict";var a=n("3fb5"),i=n("d8d6");function r(e,t,n,a){i.call(this,e,t,n,a)}a(r,i),r.enabled=i.enabled&&i.supportsCORS,e.exports=r},e2b3:function(e,t,n){"use strict";var a=n("3fb5"),i=n("7577"),r=n("1548"),o=n("df09"),s=n("73aa");function l(e){if(!s.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",r,o)}a(l,i),l.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||o.enabled)},l.transportName="xhr-polling",l.roundTrips=2,e.exports=l},e362:function(e,t,n){"use strict";var a=n("3fb5"),i=n("9a83");function r(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}a(r,i),e.exports=r},e556:function(e,t,n){"use strict";var a=n("3fb5"),i=n("7577"),r=n("b185"),o=n("1548"),s=n("9d7d");function l(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}a(l,i),l.enabled=r.enabled,l.transportName="xdr-polling",l.roundTrips=2,e.exports=l},e998:function(e,t,n){"use strict";var a=n("3fb5"),i=n("ada0").EventEmitter,r=function(){};function o(e,t){r(e),i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}a(o,i),o.prototype.send=function(e){r("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){r("sendScheduleWait");var e,t=this;this.sendStop=function(){r("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){r("timeout"),t.sendStop=null,t.sendSchedule()}),25)},o.prototype.sendSchedule=function(){r("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(r("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){r("_cleanup"),this.removeAllListeners()},o.prototype.close=function(){r("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=o},f1f8:function(e,t,n){"use strict";(function(t){var a=n("c282"),i=n("930c"),r=n("26a0"),o=function(){};e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(n,a){t.parent!==t?t.parent.postMessage(i.stringify({windowId:e.exports.currentWindowId,type:n,data:a||""}),"*"):o("Cannot postMessage, no parent window.",n,a)},createIframe:function(e,n){var i,r,s=t.document.createElement("iframe"),l=function(){o("unattach"),clearTimeout(i);try{s.onload=null}catch(e){}s.onerror=null},c=function(){o("cleanup"),s&&(l(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),a.unloadDel(r))},u=function(e){o("onerror",e),s&&(c(),n(e))},d=function(e,t){o("post",e,t),setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(n){}}),0)};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){u("onerror")},s.onload=function(){o("onload"),clearTimeout(i),i=setTimeout((function(){u("onload timeout")}),2e3)},t.document.body.appendChild(s),i=setTimeout((function(){u("timeout")}),15e3),r=a.unloadAdd(c),{post:d,cleanup:c,loaded:l}},createHtmlfile:function(n,i){var r,s,l,c=["Active"].concat("Object").join("X"),u=new t[c]("htmlfile"),d=function(){clearTimeout(r),l.onerror=null},p=function(){u&&(d(),a.unloadDel(s),l.parentNode.removeChild(l),l=u=null,CollectGarbage())},f=function(e){o("onerror",e),u&&(p(),i(e))},h=function(e,t){try{setTimeout((function(){l&&l.contentWindow&&l.contentWindow.postMessage(e,t)}),0)}catch(n){}};u.open(),u.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var m=u.createElement("div");return u.body.appendChild(m),l=u.createElement("iframe"),m.appendChild(l),l.src=n,l.onerror=function(){f("onerror")},r=setTimeout((function(){f("timeout")}),15e3),s=a.unloadAdd(p),{post:h,cleanup:p,loaded:d}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"===typeof t.postMessage||"object"===typeof t.postMessage)&&!r.isKonqueror())}).call(this,n("c8ba"))},f701:function(e,t,n){"use strict";var a=n("ada0").EventEmitter,i=n("3fb5");function r(){var e=this;a.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),r.timeout)}i(r,a),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,e.exports=r},f7a9:function(e,t,n){"use strict";var a=n("3fb5"),i=n("621f"),r=n("e998"),o=n("0e88"),s=function(){};function l(e,t,n,a,l){var c=i.addPath(e,t);s(c);var u=this;r.call(this,e,n),this.poll=new o(a,c,l),this.poll.on("message",(function(e){s("poll message",e),u.emit("message",e)})),this.poll.once("close",(function(e,t){s("poll close",e,t),u.poll=null,u.emit("close",e,t),u.close()}))}a(l,r),l.prototype.close=function(){r.prototype.close.call(this),s("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=l},f84c:function(e,t,n){"use strict";(function(t){var a=n("3fb5"),i=n("f7a9"),r=n("f9f5"),o=n("bf4a");function s(e){if(!s.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",o,r)}a(s,i),s.enabled=function(){return!!t.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,e.exports=s}).call(this,n("c8ba"))},f91e:function(e,t,n){"use strict";var a=n("3fb5"),i=n("ada0").EventEmitter,r=n("ca34"),o=function(){};function s(e){o(e),i.call(this);var t=this,n=this.es=new r(e);n.onmessage=function(e){o("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){o("error",n.readyState,e);var a=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(a)}}a(s,i),s.prototype.abort=function(){o("abort"),this._cleanup(),this._close("user")},s.prototype._cleanup=function(){o("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},s.prototype._close=function(e){o("close",e);var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=s},f9f5:function(e,t,n){"use strict";(function(t){var a=n("f1f8"),i=n("2582"),r=n("26a0"),o=n("621f"),s=n("3fb5"),l=n("ada0").EventEmitter,c=function(){};function u(e){c(e);var n=this;l.call(this),a.polluteGlobalNamespace(),this.id="a"+i.string(6);var r=o.addQuery(e,"c="+encodeURIComponent(a.WPrefix+"."+this.id));t[a.WPrefix][this.id]=this._callback.bind(this),this._createScript(r),this.timeoutId=setTimeout((function(){c("timeout"),n._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}s(u,l),u.prototype.abort=function(){if(c("abort"),t[a.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){c("_callback",e),this._cleanup(),this.aborting||(e&&(c("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){c("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(c("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[a.WPrefix][this.id]},u.prototype._scriptError=function(){c("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){c("_createScript",e);var n,a=this,o=this.script=t.document.createElement("script");if(o.id="a"+i.string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){c("onload"),a._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(c("onreadystatechange",o.readyState),/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){a.loadedOkay=!0;try{o.onclick()}catch(e){}}o&&a._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"===typeof o.async&&t.document.attachEvent)if(r.isOpera())n=this.script2=t.document.createElement("script"),n.text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=n.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(l){}o.async=!0}"undefined"!==typeof o.async&&(o.async=!0);var s=t.document.getElementsByTagName("head")[0];s.insertBefore(o,s.firstChild),n&&s.insertBefore(n,s.firstChild)},e.exports=u}).call(this,n("c8ba"))},fa8a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dept:view",type:"primary"},on:{click:function(t){return e.findTreeData(null)}}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dept:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini",rowKey:"id","element-loading-text":"$t('action.loading')"}},[n("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"ID"}}),n("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),n("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级部门"}}),n("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),n("el-table-column",{attrs:{prop:"createBy","header-align":"center",align:"center",label:"创建人"}}),n("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",label:"创建时间",formatter:e.dateFormat}}),n("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:dept:edit"},on:{click:function(n){return e.handleEdit(t.row)}}}),n("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:dept:delete",type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}})]}}])})],1),n("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),n("el-form-item",{attrs:{label:"上级机构",prop:"parentName"}},[n("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),2!==e.dataForm.type?n("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[n("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),n("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},i=[],r=(n("b0c0"),n("7a63")),o=n("4d10"),s=n("9ce2"),l=n("9158"),c={components:{PopupTreeInput:s["a"],KtButton:r["a"],TableTreeColumn:o["a"]},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,dataForm:{id:"",name:"",parentId:0,parentName:"",orderNum:0},dataRule:{name:[{required:!0,message:"机构名称不能为空",trigger:"blur"}],parentName:[{required:!0,message:"上级机构不能为空",trigger:"change"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.dept.findDeptTree().then((function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1}))},getParentMenuTree:function(e){var t={parentId:0,name:"顶级菜单",children:e};return[t]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:"",name:"",parentId:0,parentName:"",orderNum:0}},handleEdit:function(e){this.dialogVisible=!0,Object.assign(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var n=t.getDeleteIds([],e);t.$api.dept.batchDelete(n).then((function(e){console.log(e),t.findTreeData(),200==e.code?t.$message({message:"删除成功",type:"success"}):t.$message({message:"操作失败, "+e.msg,type:"error"})}))}))},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var n=0,a=t.children.length;n<a;n++)this.getDeleteIds(e,t.children[n]);return e},handleTreeSelectChange:function(e,t){console.log(t),this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},submitForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.dept.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()}))}))}))},dateFormat:function(e,t,n,a){return console.log(n),console.log(a),Object(l["a"])(e[t.property])}},mounted:function(){this.findTreeData()}},u=c,d=n("2877"),p=Object(d["a"])(u,a,i,!1,null,"8664f6dc",null);t["default"]=p.exports},fea2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:loginlog:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1)],1)],1),n("kt-table",{attrs:{data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},i=[],r=(n("b0c0"),n("c719")),o=n("7a63"),s=n("9158"),l={components:{KtTable:r["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"status",label:"状态",minWidth:120},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:this.filters.name,status:"online"},this.$api.loginlog.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},dateFormat:function(e,t){return Object(s["a"])(e[t.property])}},mounted:function(){}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,"b98ff044",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-74fbd318.ed952223.js.map