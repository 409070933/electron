(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2d4debc"],{"0841":function(e,t,a){},"17c4":function(e,t,a){"use strict";var n=a("345e"),i=a.n(n);i.a},"1d57":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.label,callback:function(t){e.$set(e.filters,"label",t)},expression:"filters.label"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dict:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dict:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("kt-table",{attrs:{permsEdit:"sys:dict:edit",permsDelete:"sys:dict:delete",data:e.pageResult,columns:e.columns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.editDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),a("el-form-item",{attrs:{label:"名称",prop:"label"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.label,callback:function(t){e.$set(e.dataForm,"label",t)},expression:"dataForm.label"}})],1),a("el-form-item",{attrs:{label:"值",prop:"value"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.value,callback:function(t){e.$set(e.dataForm,"value",t)},expression:"dataForm.value"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.sort,callback:function(t){e.$set(e.dataForm,"sort",t)},expression:"dataForm.sort"}})],1),a("el-form-item",{attrs:{label:"描述 ",prop:"description"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.description,callback:function(t){e.$set(e.dataForm,"description",t)},expression:"dataForm.description"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remarks,callback:function(t){e.$set(e.dataForm,"remarks",t)},expression:"dataForm.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.editDialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit"))+" ")])],1)],1)],1)},i=[],l=a("c719"),o=a("7a63"),r=a("9158"),s={components:{KtTable:l["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{label:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"label",label:"名称",minWidth:100},{prop:"value",label:"值",minWidth:100},{prop:"type",label:"类型",minWidth:80},{prop:"sort",label:"排序",minWidth:80},{prop:"description",label:"描述",minWidth:120},{prop:"remarks",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,editDialogVisible:!1,editLoading:!1,dataFormRules:{label:[{required:!0,message:"请输入名称",trigger:"blur"}]},dataForm:{id:"",label:"",value:"",type:"",sort:0,description:"",remarks:""}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:"label",value:this.filters.label},this.$api.dict.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.dict.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){this.editDialogVisible=!0,this.operation=!0,this.dataForm={id:"",label:"",value:"",type:"",sort:0,description:"desc",remarks:"remark"}},handleEdit:function(e){this.editDialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.dict.save(t).then((function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.editLoading=!1,e.$refs["dataForm"].resetFields(),e.editDialogVisible=!1,e.findPage(null)}))}))}))},dateFormat:function(e,t){return Object(r["a"])(e[t.property])}},mounted:function(){}},d=s,c=a("2877"),u=Object(c["a"])(d,n,i,!1,null,"65df86ff",null);t["default"]=u.exports},"28b7":function(e,t,a){"use strict";var n=a("5a0d"),i=a.n(n);i.a},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({staticStyle:{float:"right"},attrs:{size:"mini","current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var n=r(),i=e-n,s=20,d=0;t="undefined"===typeof t?500:t;var c=function e(){d+=s;var r=Math.easeInOutQuad(d,n,i,t);o(r),d<t?l(e):a&&"function"===typeof a&&a()};c()}var d={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=d,u=(a("28b7"),a("2877")),p=Object(u["a"])(c,n,i,!1,null,"35adf35e",null);t["a"]=p.exports},"345e":function(e,t,a){},"35d6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"机构名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:role:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.content,"max-height":420,size:"mini",align:"left"},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleRoleSelectChange}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"id",label:"ID",sortable:"",width:"100"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"机构名称",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"remark",label:"备注",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"createBy",label:"创建人",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"createTime",label:"创建时间",sortable:""}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(a){return e.change(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"185",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"fa fa-edit",size:"mini"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),a("el-button",{attrs:{icon:"fa fa-trash",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageRequest.total>0,expression:"pageRequest.total>0"}],attrs:{total:e.pageRequest.total,page:e.pageRequest.pageNum,limit:e.pageRequest.pageSize},on:{"update:page":function(t){return e.$set(e.pageRequest,"pageNum",t)},"update:limit":function(t){return e.$set(e.pageRequest,"pageSize",t)},pagination:e.findPage}}),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1),a("el-form-item",{attrs:{label:"备注 ",prop:"remark"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit"))+" ")])],1)],1),a("div",{staticClass:"menu-container",attrs:{"v-if":!0}},[a("div",{staticClass:"menu-header"},[a("span",[a("B",[e._v("机构菜单授权")])],1)]),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"menuTree",staticStyle:{width:"100%","pading-top":"20px"},attrs:{data:e.menuData,size:"mini","show-checkbox":"","node-key":"id",props:e.defaultProps,"render-content":e.renderContent,"element-loading-text":"拼命加载中","check-strictly":!0},on:{"check-change":e.handleMenuCheckChange}}),a("div",{staticStyle:{float:"left","padding-left":"24px","padding-top":"12px","padding-bottom":"4px"}},[a("el-checkbox",{attrs:{disabled:null==this.selectRole.id},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[a("b",[e._v("全选")])])],1),a("div",{staticStyle:{float:"right","padding-right":"15px","padding-top":"4px","padding-bottom":"4px"}},[a("kt-button",{attrs:{label:e.$t("action.reset"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id},on:{click:e.resetSelection}}),a("kt-button",{attrs:{label:e.$t("action.submit"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id,loading:e.authLoading},on:{click:e.submitAuthForm}})],1)],1)],1)},i=[],l=(a("4160"),a("b0c0"),a("159b"),a("7a63")),o=a("9158"),r=a("333d"),s={name:"org",components:{KtButton:l["a"],Pagination:r["a"]},created:function(){this.findPage()},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"机构名称",minWidth:120},{prop:"remark",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:120},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],loading:!1,pageRequest:{pageNum:1,pageSize:10,total:0},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}]},dataForm:{id:"",name:"",orderNum:0,remark:""},selectRole:{},menuData:[],menuSelections:[],menuLoading:!1,authLoading:!1,checkAll:!1,currentRoleMenus:[],defaultProps:{children:"children",label:""}}},methods:{findPage:function(e){var t=this;this.loading=!0,this.pageRequest.params={name:"",value:this.filters.name},this.$api.org.findPage(this.pageRequest).then((function(e){t.loading=!1,t.pageResult=e.data,t.pageRequest.total=t.pageResult.totalSize,t.pageRequest.pageNum=t.pageResult.pageNum,t.pageRequest.pageSize=t.pageResult.pageSize,t.findTreeData()})).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.role.batchDelete(e.params).then(e.callback)},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:"",name:"",orderNum:0,remark:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.org.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)}))}))}))},findTreeData:function(){var e=this;this.menuLoading=!0,this.$api.menu.findMenuTree().then((function(t){e.menuData=t.data,e.menuLoading=!1}))},handleRoleSelectChange:function(e){var t=this;null!=e&&(this.selectRole=e,this.$api.org.findOrgMenus({orgId:this.selectRole.id}).then((function(e){t.currentRoleMenus=e.data,t.$refs.menuTree.setCheckedNodes(e.data)})))},handleMenuCheckChange:function(e,t,a){var n=this;if(console.log(e),console.log(t),console.log(a),t){var i=e.parentId;null!==i&&this.$refs.menuTree.setChecked(i,!0,!1)}else null!=e.children&&e.children.forEach((function(e){n.$refs.menuTree.setChecked(e.id,!1,!1)}))},resetSelection:function(){this.checkAll=!1,this.$refs.menuTree.setCheckedNodes(this.currentRoleMenus)},handleCheckAll:function(){if(this.checkAll){var e=[];this.checkAllMenu(this.menuData,e),this.$refs.menuTree.setCheckedNodes(e)}else this.$refs.menuTree.setCheckedNodes([])},checkAllMenu:function(e,t){var a=this;e.forEach((function(e){t.push(e),e.children&&a.checkAllMenu(e.children,t)}))},submitAuthForm:function(){var e=this,t=this.selectRole.id;if("admin"!=this.selectRole.name){this.authLoading=!0;var a=this.$refs.menuTree.getCheckedNodes(!1,!0);console.log(a);for(var n=[],i=0,l=a.length;i<l;i++){var o={orgId:t,menuId:a[i].id};n.push(o)}console.log(t),console.log(n),this.$api.org.saveOrgMenus({orgId:t,orgMenus:n}).then((function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.authLoading=!1}))}else this.$message({message:"超级管理员拥有所有菜单权限，不允许修改！",type:"error"})},renderContent:function(e,t){var a=t.node,n=t.data,i=t.store;return console.log(a),console.log(i),e("div",{class:"column-container"},[e("span",{style:"text-algin:center;margin-right:80px;"},[n.name]),e("span",{style:"text-algin:center;margin-right:80px;"},[e("el-tag",{attrs:{type:0===n.type?"":1===n.type?"success":"info",size:"small"}},[0===n.type?"目录":1===n.type?"菜单":"按钮"])]),e("span",{style:"text-algin:center;margin-right:80px;"},[" ",e("i",{class:n.icon})]),e("span",{style:"text-algin:center;margin-right:80px;"},[n.parentName?n.parentName:"顶级菜单"]),e("span",{style:"text-algin:center;margin-right:80px;"},[n.url?n.url:"\t"])])},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(o["a"])(e[t.property])},handleCurrentChange:function(){},handleSelectionChange:function(){},change:function(e){var t=this;this.$api.org.save(e).then((function(e){200==e.code?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.findPage(null)}))}},mounted:function(){}},d=s,c=(a("6cb1"),a("2877")),u=Object(c["a"])(d,n,i,!1,null,"326f7000",null);t["default"]=u.exports},"488d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"角色名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:role:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("kt-table",{attrs:{permsEdit:"sys:role:edit",permsDelete:"sys:role:delete",highlightCurrentRow:!0,stripe:!1,data:e.pageResult,columns:e.columns,showBatchDelete:!1},on:{handleCurrentChange:e.handleRoleSelectChange,findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"备注 ",prop:"remark"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit"))+" ")])],1)],1),a("div",{staticClass:"menu-container",attrs:{"v-if":!0}},[a("div",{staticClass:"menu-header"},[a("span",[a("B",[e._v("角色菜单授权")])],1)]),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"menuTree",staticStyle:{width:"100%","pading-top":"20px"},attrs:{data:e.menuData,size:"mini","show-checkbox":"","node-key":"id",props:e.defaultProps,"render-content":e.renderContent,"element-loading-text":"拼命加载中","check-strictly":!0},on:{"check-change":e.handleMenuCheckChange}}),a("div",{staticStyle:{float:"left","padding-left":"24px","padding-top":"12px","padding-bottom":"4px"}},[a("el-checkbox",{attrs:{disabled:null==this.selectRole.id},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[a("b",[e._v("全选")])])],1),a("div",{staticStyle:{float:"right","padding-right":"15px","padding-top":"4px","padding-bottom":"4px"}},[a("kt-button",{attrs:{label:e.$t("action.reset"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id},on:{click:e.resetSelection}}),a("kt-button",{attrs:{label:e.$t("action.submit"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id,loading:e.authLoading},on:{click:e.submitAuthForm}})],1)],1)],1)},i=[],l=(a("4160"),a("b0c0"),a("159b"),a("c719")),o=a("7a63"),r=a("9158"),s={components:{KtTable:l["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"角色名",minWidth:120},{prop:"remark",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:120},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}]},dataForm:{id:"",name:"",remark:""},selectRole:{},menuData:[],menuSelections:[],menuLoading:!1,authLoading:!1,checkAll:!1,currentRoleMenus:[],defaultProps:{children:"children",label:""}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:"",value:this.filters.name},this.$api.role.findPage(this.pageRequest).then((function(e){t.pageResult=e.data,t.findTreeData()})).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.role.batchDelete(e.params).then(e.callback)},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:"",name:"",remark:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.role.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)}))}))}))},findTreeData:function(){var e=this;this.menuLoading=!0,this.$api.menu.findMenuTree().then((function(t){e.menuData=t.data,e.menuLoading=!1}))},handleRoleSelectChange:function(e){var t=this;null!=e&&null!=e.val&&(this.selectRole=e.val,this.$api.role.findRoleMenus({roleId:this.selectRole.id}).then((function(e){t.currentRoleMenus=e.data,t.$refs.menuTree.setCheckedNodes(e.data)})))},handleMenuCheckChange:function(e,t,a){var n=this;if(console.log(e),console.log(t),console.log(a),t){var i=e.parentId;null!==i&&this.$refs.menuTree.setChecked(i,!0,!1)}else null!=e.children&&e.children.forEach((function(e){n.$refs.menuTree.setChecked(e.id,!1,!1)}))},resetSelection:function(){this.checkAll=!1,this.$refs.menuTree.setCheckedNodes(this.currentRoleMenus)},handleCheckAll:function(){if(this.checkAll){var e=[];this.checkAllMenu(this.menuData,e),this.$refs.menuTree.setCheckedNodes(e)}else this.$refs.menuTree.setCheckedNodes([])},checkAllMenu:function(e,t){var a=this;e.forEach((function(e){t.push(e),e.children&&a.checkAllMenu(e.children,t)}))},submitAuthForm:function(){var e=this,t=this.selectRole.id;if("admin"!=this.selectRole.name){this.authLoading=!0;var a=this.$refs.menuTree.getCheckedNodes(!1,!0);console.log(a);for(var n=[],i=0,l=a.length;i<l;i++){var o={roleId:t,menuId:a[i].id};n.push(o)}this.$api.role.saveRoleMenus({roleId:t,roleMenus:n}).then((function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.authLoading=!1}))}else this.$message({message:"超级管理员拥有所有菜单权限，不允许修改！",type:"error"})},renderContent:function(e,t){var a=t.node,n=t.data,i=t.store;return console.log(a),console.log(i),e("div",{class:"column-container"},[e("span",{style:"text-algin:center;margin-right:80px;"},[n.name]),e("span",{style:"text-algin:center;margin-right:80px;"},[e("el-tag",{attrs:{type:0===n.type?"":1===n.type?"success":"info",size:"small"}},[0===n.type?"目录":1===n.type?"菜单":"按钮"])]),e("span",{style:"text-algin:center;margin-right:80px;"},[" ",e("i",{class:n.icon})]),e("span",{style:"text-algin:center;margin-right:80px;"},[n.parentName?n.parentName:"顶级菜单"]),e("span",{style:"text-algin:center;margin-right:80px;"},[n.url?n.url:"\t"])])},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(r["a"])(e[t.property])}},mounted:function(){}},d=s,c=(a("17c4"),a("2877")),u=Object(c["a"])(d,n,i,!1,null,"17b72c80",null);t["default"]=u.exports},"4b3b":function(e,t,a){var n={"./404":"dc75","./404/":"dc75","./404/index":"dc75","./404/index.vue":"dc75","./Business/Test":"64f3","./Business/Test.vue":"64f3","./Intro/Intro":"326e","./Intro/Intro.vue":"326e","./Sys/Dept":"fa8a","./Sys/Dept.vue":"fa8a","./Sys/Dict":"1d57","./Sys/Dict.vue":"1d57","./Sys/Log":"d9d6","./Sys/Log.vue":"d9d6","./Sys/Loginlog":"bd22","./Sys/Loginlog.vue":"bd22","./Sys/Menu":"d7ab","./Sys/Menu.vue":"d7ab","./Sys/Online":"fea2","./Sys/Online.vue":"fea2","./Sys/Org":"35d6","./Sys/Org.vue":"35d6","./Sys/Role":"488d","./Sys/Role.vue":"488d","./Sys/User":"8e26","./Sys/User.vue":"8e26","./layout":"162e","./layout/":"162e","./layout/components":"38e2","./layout/components/":"38e2","./layout/components/appmain":"9f37","./layout/components/appmain/":"9f37","./layout/components/appmain/index":"9f37","./layout/components/appmain/index.vue":"9f37","./layout/components/headbar":"f9c8","./layout/components/headbar/":"f9c8","./layout/components/headbar/index":"f9c8","./layout/components/headbar/index.vue":"f9c8","./layout/components/index":"38e2","./layout/components/index.js":"38e2","./layout/components/navbar":"583a","./layout/components/navbar/":"583a","./layout/components/navbar/index":"583a","./layout/components/navbar/index.vue":"583a","./layout/index":"162e","./layout/index.vue":"162e","./login":"9ed6","./login/":"9ed6","./login/index":"9ed6","./login/index.vue":"9ed6"};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=l,e.exports=i,i.id="4b3b"},"4d10":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table-column",e._b({attrs:{prop:e.prop},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:e.childStyles(t.row),on:{click:function(a){return a.preventDefault(),e.toggleHandle(t.$index,t.row)}}},[a("i",{class:e.iconClasses(t.row),style:e.iconStyles(t.row)}),e._v(" "+e._s(t.row[e.prop])+" ")])]}}])},"el-table-column",e.$attrs,!1))},i=[],l=(a("99af"),a("c975"),a("fb6a"),a("a434"),a("6747")),o=a.n(l),r={name:"table-tree-column",props:{prop:{type:String},treeKey:{type:String,default:"id"},parentKey:{type:String,default:"parentId"},levelKey:{type:String,default:"level"},childKey:{type:String,default:"children"}},methods:{childStyles:function(e){return{"padding-left":25*e[this.levelKey]+"px"}},iconClasses:function(e){return[e._expanded?"el-icon-caret-bottom":"el-icon-caret-right"]},iconStyles:function(e){return{visibility:this.hasChild(e)?"visible":"hidden"}},hasChild:function(e){return o()(e[this.childKey])&&e[this.childKey].length>=1||!1},toggleHandle:function(e,t){var a=this;if(this.hasChild(t)){var n=this.$parent.store.states.data.slice(0);n[e]._expanded=!n[e]._expanded,n=n[e]._expanded?n.splice(0,e+1).concat(t[this.childKey]).concat(n):this.removeChildNode(n,t[this.treeKey]),this.$parent.store.commit("setData",n),this.$nextTick((function(){a.$parent.doLayout()}))}},removeChildNode:function(e,t){var a=o()(t)?t:[t];if(t.length<=0)return e;for(var n=[],i=0;i<e.length;i++)-1!==a.indexOf(e[i][this.parentKey])&&-1===a.indexOf(e[i][this.treeKey])&&(n.push(e.splice(i,1)[0][this.treeKey]),i--);return this.removeChildNode(e,n)}}},s=r,d=a("2877"),c=Object(d["a"])(s,n,i,!1,null,null,null);t["a"]=c.exports},"5a0d":function(e,t,a){},"63e1":function(e,t,a){"use strict";var n=a("0841"),i=a.n(n);i.a},"64f3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dept:view",type:"primary"},on:{click:function(t){return e.findTreeData(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dept:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini",rowKey:"id","element-loading-text":"$t('action.loading')"}},[a("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"ID"}}),a("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),a("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级机构"}}),a("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),a("el-table-column",{attrs:{prop:"createBy","header-align":"center",align:"center",label:"创建人"}}),a("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",label:"创建时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:dept:edit"},on:{click:function(a){return e.handleEdit(t.row)}}}),a("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:dept:delete",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"上级机构",prop:"parentName"}},[a("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},i=[],l=(a("b0c0"),a("7a63")),o=a("4d10"),r=a("9ce2"),s=a("9158"),d={components:{PopupTreeInput:r["a"],KtButton:l["a"],TableTreeColumn:o["a"]},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,dataForm:{id:0,name:"",parentId:0,parentName:"",orderNum:0},dataRule:{name:[{required:!0,message:"机构名称不能为空",trigger:"blur"}],parentName:[{required:!0,message:"上级机构不能为空",trigger:"change"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.dept.findDeptTree().then((function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1}))},getParentMenuTree:function(e){var t={parentId:0,name:"顶级菜单",children:e};return[t]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:0,name:"",parentId:0,parentName:"",orderNum:0}},handleEdit:function(e){this.dialogVisible=!0,Object.assign(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var a=t.getDeleteIds([],e);t.$api.dept.batchDelete(a).then((function(e){console.log(e),t.findTreeData(),t.$message({message:"删除成功",type:"success"})}))}))},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var a=0,n=t.children.length;a<n;a++)this.getDeleteIds(e,t.children[a]);return e},handleTreeSelectChange:function(e,t){console.log(t),this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},submitForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.dept.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()}))}))}))},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(s["a"])(e[t.property])}},mounted:function(){this.findTreeData()}},c=d,u=a("2877"),p=Object(u["a"])(c,n,i,!1,null,"2c17b572",null);t["default"]=p.exports},6747:function(e,t){var a=Array.isArray;e.exports=a},"6cb1":function(e,t,a){"use strict";var n=a("c233"),i=a.n(n);i.a},"7a63":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{size:e.size,type:e.type,icon:e.icon,loading:e.loading,disabled:!e.hasPerms(e.perms)},on:{click:e.handleClick}},[e._v(" "+e._s(e.label)+" ")])},i=[],l=a("4360");function o(e){for(var t=!1,a=l["a"].state.user.perms,n=0,i=a.length;n<i;n++)if(a[n]===e){t=!0;break}return t}var r={name:"KtButton",props:{label:{type:String,default:"Button"},icon:{type:String,default:""},size:{type:String,default:"mini"},type:{type:String,default:null},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},perms:{type:String,default:null}},data:function(){return{}},methods:{handleClick:function(){this.$emit("click",{})},hasPerms:function(e){return o(e)&!this.disabled}},mounted:function(){}},s=r,d=a("2877"),c=Object(d["a"])(s,n,i,!1,null,"8f0bf868",null);t["a"]=c.exports},"8e26":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:user:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",[a("el-button-group",[a("el-tooltip",{attrs:{content:"刷新",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-refresh"},on:{click:function(t){return e.findPage(null)}}})],1),a("el-tooltip",{attrs:{content:"列显示",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-filter"},on:{click:e.displayFilterColumnsDialog}})],1),a("el-tooltip",{attrs:{content:"导出",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-file-excel-o"}})],1)],1)],1)],1),a("table-column-filter-dialog",{ref:"tableColumnFilterDialog",attrs:{columns:e.columns},on:{handleFilterColumns:e.handleFilterColumns}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.content,"max-height":420,size:"mini",align:"left"},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"id",label:"ID",sortable:"",width:"100"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"name",label:"用户名",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"deptName",label:"部门",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"roleNames",label:"角色",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"email",label:"邮箱",sortable:""}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"mobile",label:"手机",sortable:""}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(a){return e.change(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"185",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"fa fa-edit",size:"mini"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),a("el-button",{attrs:{icon:"fa fa-trash",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px"}},[a("kt-button",{staticStyle:{float:"left"},attrs:{label:e.$t("action.batchDelete"),perms:"sys:user:delete",size:e.size,type:"danger",disabled:0===this.selections.length},on:{click:function(t){return e.handleBatchDelete()}}}),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageRequest.total>0,expression:"pageRequest.total>0"}],attrs:{total:e.pageRequest.total,page:e.pageRequest.pageNum,limit:e.pageRequest.pageSize},on:{"update:page":function(t){return e.$set(e.pageRequest,"pageNum",t)},"update:limit":function(t){return e.$set(e.pageRequest,"pageSize",t)},pagination:e.findPage}})],1),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[e._e(),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[a("popup-tree-input",{attrs:{data:e.deptData,props:e.deptTreeProps,prop:e.dataForm.deptName,nodeKey:""+e.dataForm.deptId,currentChangeHandle:e.deptTreeCurrentChangeHandle}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1),e.operation?e._e():a("el-form-item",{attrs:{label:"角色",prop:"userRoles"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.dataForm.userRoles,callback:function(t){e.$set(e.dataForm,"userRoles",t)},expression:"dataForm.userRoles"}},e._l(e.roles,(function(e){return a("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(" "+e._s(e.$t("action.submit"))+" ")])],1)],1)],1)},i=[],l=(a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("9ce2")),o=a("7a63"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"表格显示列",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{ref:"fitlerTable",staticStyle:{width:"100%"},attrs:{data:e.columns,height:"330px","tooltip-effect":"dark","header-align":"left",align:"left",size:e.size},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{label:"属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.prop))]}}])}),a("el-table-column",{attrs:{label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.size},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),a("el-table-column",{attrs:{label:"最小宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.size},model:{value:t.row.minWidth,callback:function(a){e.$set(t.row,"minWidth",a)},expression:"scope.row.minWidth"}})]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary"},nativeOn:{click:function(t){return e.handleFilterColumns(t)}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)},s=[],d={name:"TableColumnFilterDialog",components:{},props:{columns:{type:Array,default:[]},size:{type:String,default:"mini"}},data:function(){return{selections:[],dialogVisible:!1}},methods:{selectionChange:function(e){this.selections=e},setDialogVisible:function(e){this.dialogVisible=e},handleFilterColumns:function(){for(var e=[],t=0;t<this.columns.length;t++){var a=this.columns[t];this.hasColumn(a)&&e.push(a)}this.$emit("handleFilterColumns",{filterColumns:JSON.parse(JSON.stringify(e))})},hasColumn:function(e){for(var t=0;t<this.selections.length;t++){var a=this.selections[t];if(e.prop==a.prop)return!0}return!1}},mounted:function(){}},c=d,u=a("2877"),p=Object(u["a"])(c,r,s,!1,null,"f40bf1f0",null),m=p.exports,f=a("9158"),h=a("333d"),g={components:{PopupTreeInput:l["a"],KtButton:o["a"],TableColumnFilterDialog:m,Pagination:h["a"]},created:function(){this.findPage()},data:function(){return{size:"small",filters:{name:""},loading:!1,columns:[],filterColumns:[],pageRequest:{pageNum:1,pageSize:10,total:0},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}]},dataForm:{id:"",name:"",password:"",deptId:"",deptName:"",email:"",mobile:"",status:"",userRoles:[]},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],selections:[]}},methods:{findPage:function(e){var t=this;this.loading=!0,this.pageRequest.params={name:this.filters.name},this.$api.user.findPage(this.pageRequest).then((function(e){t.loading=!1,t.pageResult=e.data,t.pageRequest.total=t.pageResult.totalSize,t.pageRequest.pageNum=t.pageResult.pageNum,t.pageRequest.pageSize=t.pageResult.pageSize,t.findRoles()})).then(null!=e?e.callback:"")},findRoles:function(){var e=this;this.$api.role.findAll().then((function(t){e.roles=t.data}))},findUserRoles:function(e){var t=this;this.$api.user.findUserRoles({userId:e.id}).then((function(e){for(var a=e.data,n=[],i=0,l=a.length;i<l;i++)n.push(a[i].roleId);console.log(n),t.dataForm.userRoles=n}))},handleDelete:function(e){this.delete(e.id)},handleBatchDelete:function(){var e=this.selections.map((function(e){return e.id})).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){for(var a=[],n=(e+"").split(","),i=0;i<n.length;i++)a.push({id:n[i]});t.$api.user.batchDelete(a).then((function(e){200==e.code?(t.$message({message:"操作成功",type:"success"}),t.findPage(null)):t.$message({message:"操作失败, "+e.msg,type:"error"})}))}))},handleCurrentChange:function(){},handleSelectionChange:function(e){this.selections=e,console.log(this.selections)},change:function(e){var t=this;this.$api.user.userStatusSwitching(e).then((function(e){t.editLoading=!1,200==e.code?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.findPage(null)}))},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:"",name:"",password:"",deptId:"",deptName:"",email:"",mobile:"",status:"",userRoles:[]}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=Object.assign({},e.row),this.findUserRoles(e.row)},submitForm:function(){var e=this;""!=this.dataForm.deptId?this.$refs.dataForm.validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;for(var t=Object.assign({},e.dataForm),a=[],n=0,i=t.userRoles.length;n<i;n++){var l={userId:t.id,roleId:t.userRoles[n]};a.push(l)}t.userRoles=a,e.$api.user.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)}))}))})):this.$message({message:"请选择所属部门！",type:"error"})},findDeptTree:function(){var e=this;this.$api.dept.findDeptTree().then((function(t){e.deptData=t.data}))},deptTreeCurrentChangeHandle:function(e,t){console.log(t),this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(f["a"])(e[t.property])},displayFilterColumnsDialog:function(){this.$refs.tableColumnFilterDialog.setDialogVisible(!0)},handleFilterColumns:function(e){this.filterColumns=e.filterColumns,this.$refs.tableColumnFilterDialog.setDialogVisible(!1)},initColumns:function(){this.columns=[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"用户名",minWidth:120},{prop:"deptName",label:"部门",minWidth:120},{prop:"roleNames",label:"角色",minWidth:100},{prop:"email",label:"邮箱",minWidth:120},{prop:"mobile",label:"手机",minWidth:100},{prop:"status",label:"状态",minWidth:70}],this.filterColumns=JSON.parse(JSON.stringify(this.columns))}},mounted:function(){this.findDeptTree(),this.initColumns()}},b=g,v=Object(u["a"])(b,n,i,!1,null,"4cba809d",null);t["default"]=v.exports},"9ce2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-popover",{ref:"popover",attrs:{placement:e.placement,trigger:"click"}},[a("el-tree",{ref:"popupTree",attrs:{data:e.data,props:e.props,"node-key":"nodeKey","default-expand-all":e.defaultExpandAll,"highlight-current":!0,"expand-on-click-node":!0},on:{"current-change":e.currentChangeHandle}})],1),a("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticStyle:{cursor:"pointer"},attrs:{readonly:!0,placeholder:e.placeholder},model:{value:e.prop,callback:function(t){e.prop=t},expression:"prop"}})],1)},i=[],l={name:"PopupTreeInput",props:{data:{type:Array,default:[]},props:{type:Object,default:{}},prop:{type:String,default:""},nodeKey:{type:String,default:""},placeholder:{type:String,default:"点击选择内容"},placement:{type:String,default:"right-start"},defaultExpandAll:{type:Boolean,default:!1},currentChangeHandle:{type:Function,default:null}}},o=l,r=a("2877"),s=Object(r["a"])(o,n,i,!1,null,"08f36721",null);t["a"]=s.exports},a434:function(e,t,a){"use strict";var n=a("23e7"),i=a("23cb"),l=a("a691"),o=a("50c4"),r=a("7b0b"),s=a("65f0"),d=a("8418"),c=a("1dde"),u=a("ae40"),p=c("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var a,n,c,u,p,m,v=r(this),y=o(v.length),k=i(e,y),$=arguments.length;if(0===$?a=n=0:1===$?(a=0,n=y-k):(a=$-2,n=h(f(l(t),0),y-k)),y+a-n>g)throw TypeError(b);for(c=s(v,n),u=0;u<n;u++)p=k+u,p in v&&d(c,u,v[p]);if(c.length=n,a<n){for(u=k;u<y-n;u++)p=u+n,m=u+a,p in v?v[m]=v[p]:delete v[m];for(u=y;u>y-n+a;u--)delete v[u-1]}else if(a>n)for(u=y-n;u>k;u--)p=u+n-1,m=u+a-1,p in v?v[m]=v[p]:delete v[m];for(u=0;u<a;u++)v[u+k]=arguments[u+2];return v.length=y-n+a,c}})},bd22:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:loginlog:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1)],1)],1),a("kt-table",{attrs:{data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},i=[],l=(a("b0c0"),a("c719")),o=a("7a63"),r=a("9158"),s={components:{KtTable:l["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"status",label:"状态",minWidth:120},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:this.filters.name},this.$api.loginlog.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(r["a"])(e[t.property])}},mounted:function(){}},d=s,c=a("2877"),u=Object(c["a"])(d,n,i,!1,null,"05662083",null);t["default"]=u.exports},c233:function(e,t,a){},c719:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.content,"highlight-current-row":e.highlightCurrentRow,"element-loading-text":e.$t("action.loading"),border:e.border,stripe:e.stripe,"show-overflow-tooltip":e.showOverflowTooltip,"max-height":e.maxHeight,size:e.size,align:e.align},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[e.showBatchDelete&e.showOperation?a("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e._l(e.columns,(function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type,formatter:e.formatter,sortable:null==e.sortable||e.sortable}})})),e.showOperation?a("el-table-column",{attrs:{label:e.$t("action.operation"),width:"185",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:e.permsEdit,size:e.size},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),a("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:e.permsDelete,size:e.size,type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}],null,!1,2053442660)}):e._e()],2),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px"}},[e.showBatchDelete&e.showOperation?a("kt-button",{staticStyle:{float:"left"},attrs:{label:e.$t("action.batchDelete"),perms:e.permsDelete,size:e.size,type:"danger",disabled:0===this.selections.length},on:{click:function(t){return e.handleBatchDelete()}}}):e._e(),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.pageNum,"page-size":e.pageRequest.pageSize,total:e.data.totalSize},on:{"current-change":e.refreshPageRequest}})],1)],1)},i=[],l=(a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("7a63")),o={name:"KtTable",components:{KtButton:l["a"]},props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,size:{type:String,default:"mini"},align:{type:String,default:"left"},maxHeight:{type:Number,default:420},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{pageNum:1,pageSize:10},loading:!1,selections:[]}},methods:{findPage:function(){var e=this;this.loading=!0;var t=function(t){console.log(t),e.loading=!1};this.$emit("findPage",{pageRequest:this.pageRequest,callback:t})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.pageNum=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map((function(e){return e.id})).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){for(var a=[],n=(e+"").split(","),i=0;i<n.length;i++)a.push({id:n[i]});t.loading=!0;var l=function(e){200==e.code?(t.$message({message:"删除成功",type:"success"}),t.findPage()):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.loading=!1};t.$emit("handleDelete",{params:a,callback:l})})).catch((function(){}))}},mounted:function(){this.refreshPageRequest(1)}},r=o,s=a("2877"),d=Object(s["a"])(r,n,i,!1,null,"2ff7d104",null);t["a"]=d.exports},d7ab:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:menu:view",type:"primary"},on:{click:function(t){return e.findTreeData(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:menu:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini",rowKey:"id","element-loading-text":"$t('action.loading')"}},[a("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"120",label:"ID"}}),a("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("i",{class:e.row.icon||""})]}}])}),a("el-table-column",{attrs:{prop:"type","header-align":"center",align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?a("el-tag",{attrs:{size:"small"}},[e._v("目录")]):1===t.row.type?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("菜单")]):2===t.row.type?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("按钮")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级菜单"}}),a("el-table-column",{attrs:{prop:"url","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"菜单URL"}}),a("el-table-column",{attrs:{prop:"perms","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"授权标识"}}),a("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:menu:edit"},on:{click:function(a){return e.handleEdit(t.row)}}}),a("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:menu:delete",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[a("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[a("el-radio-group",{model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.menuTypeList,(function(t,n){return a("el-radio",{key:n,attrs:{label:n}},[e._v(e._s(t))])})),1)],1),a("el-form-item",{attrs:{label:e.menuTypeList[e.dataForm.type]+"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:e.menuTypeList[e.dataForm.type]+"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"上级菜单",prop:"parentName"}},[a("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName||""==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),0!==e.dataForm.type?a("el-form-item",{attrs:{label:"授权标识",prop:"perms"}},[a("el-input",{attrs:{placeholder:"如: sys:user:add, sys:user:edit, sys:user:delete"},model:{value:e.dataForm.perms,callback:function(t){e.$set(e.dataForm,"perms",t)},expression:"dataForm.perms"}})],1):e._e(),1===e.dataForm.type?a("el-form-item",{attrs:{label:"菜单路由",prop:"url"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"菜单路由"},model:{value:e.dataForm.url,callback:function(t){e.$set(e.dataForm,"url",t)},expression:"dataForm.url"}})],1),a("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[a("el-tooltip",{staticStyle:{padding:"10px"},attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v("URL格式：")]),a("p",[e._v("1.常规业务开发的功能URL，如用户管理，Views目录下页面路径为 /Sys/User, 此处填写 /sys/user。")]),a("p",[e._v("2.嵌套外部网页，如通过菜单打开百度网页，此处填写 http://www.baidu.com，http:// 不可省略。")]),a("p",[e._v("示例：用户管理：/sys/user 嵌套百度：http://www.baidu.com 嵌套网页：http://127.0.0.1:8000")])]),a("i",{staticClass:"el-icon-warning"})])],1)],1)],1):e._e(),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e(),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-popover",{ref:"iconListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"mod-menu__icon-popover"}},[a("div",{staticClass:"mod-menu__icon-list"},e._l(e.dataForm.iconList,(function(t,n){return a("el-button",{key:n,class:{"is-active":t===e.dataForm.icon},on:{click:function(a){return e.iconActiveHandle(t)}}},[a("icon-svg",{attrs:{name:t}})],1)})),1)]),a("el-input",{directives:[{name:"popover",rawName:"v-popover:iconListPopover",arg:"iconListPopover"}],staticClass:"icon-list__input",attrs:{readonly:!1,placeholder:"菜单图标名称（如：fa fa-home fa-lg）"},model:{value:e.dataForm.icon,callback:function(t){e.$set(e.dataForm,"icon",t)},expression:"dataForm.icon"}})],1),a("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[a("fa-icon-tooltip")],1)],1)],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},i=[],l=(a("b0c0"),a("7a63")),o=a("4d10"),r=a("9ce2"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{staticClass:"tooltip",attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v("推荐使用 Font Aweson 图标")]),a("p",[e._v("使用步骤：")]),a("p",[e._v("1.进入 "),a("a",{attrs:{href:"http://www.fontawesome.com.cn/faicons/",target:"_blank"}},[e._v("Font Aweson")]),e._v(" 页面")]),a("p",[e._v("2.查找到需要的图标,点击查看。")]),a("p",[e._v("3.复制图片样式到此处。")]),a("p",[e._v("示例：fa fa-home fa-lg")])]),a("i",{staticClass:"el-icon-warning"})])},d=[],c={data:function(){return{}},methods:{},mounted:function(){}},u=c,p=(a("63e1"),a("2877")),m=Object(p["a"])(u,s,d,!1,null,"5d81ed18",null),f=m.exports,h={components:{PopupTreeInput:r["a"],KtButton:l["a"],TableTreeColumn:o["a"],FaIconTooltip:f},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,menuTypeList:["目录","菜单","按钮"],dataForm:{id:"",type:1,name:"",parentId:0,parentName:"",url:"",perms:"",orderNum:0,icon:"",iconList:[]},dataRule:{name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.menu.findMenuTree().then((function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1}))},getParentMenuTree:function(e){var t={parentId:0,name:"顶级菜单",children:e};return[t]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:"",type:1,typeList:["目录","菜单","按钮"],name:"",parentId:0,parentName:"",url:"",perms:"",orderNum:0,icon:"",iconList:[]}},handleEdit:function(e){this.dialogVisible=!0,Object.assign(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var a=t.getDeleteIds([],e);t.$api.menu.batchDelete(a).then((function(e){console.log(e),t.findTreeData(),t.$message({message:"删除成功",type:"success"})}))}))},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var a=0,n=t.children.length;a<n;a++)this.getDeleteIds(e,t.children[a]);return e},handleTreeSelectChange:function(e){this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},iconActiveHandle:function(e){this.dataForm.icon=e},submitForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.menu.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.$refs["dataForm"].resetFields(),e.dialogVisible=!1):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()}))}))}))}},mounted:function(){this.findTreeData()}},g=h,b=Object(p["a"])(g,n,i,!1,null,"60c3b622",null);t["default"]=b.exports},d81d:function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").map,l=a("1dde"),o=a("ae40"),r=l("map"),s=o("map");n({target:"Array",proto:!0,forced:!r||!s},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d9d6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:log:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1)],1)],1),a("kt-table",{attrs:{data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},i=[],l=(a("b0c0"),a("c719")),o=a("7a63"),r=a("9158"),s={components:{KtTable:l["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"operation",label:"操作",minWidth:120},{prop:"method",label:"方法",minWidth:180},{prop:"params",label:"参数",minWidth:220},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:this.filters.name},this.$api.log.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(r["a"])(e[t.property])}},mounted:function(){}},d=s,c=a("2877"),u=Object(c["a"])(d,n,i,!1,null,"253005b7",null);t["default"]=u.exports},fa8a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dept:view",type:"primary"},on:{click:function(t){return e.findTreeData(null)}}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dept:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini",rowKey:"id","element-loading-text":"$t('action.loading')"}},[a("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"ID"}}),a("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),a("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级部门"}}),a("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),a("el-table-column",{attrs:{prop:"createBy","header-align":"center",align:"center",label:"创建人"}}),a("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",label:"创建时间",formatter:e.dateFormat}}),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:dept:edit"},on:{click:function(a){return e.handleEdit(t.row)}}}),a("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:dept:delete",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"上级机构",prop:"parentName"}},[a("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),a("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},i=[],l=(a("b0c0"),a("7a63")),o=a("4d10"),r=a("9ce2"),s=a("9158"),d={components:{PopupTreeInput:r["a"],KtButton:l["a"],TableTreeColumn:o["a"]},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,dataForm:{id:"",name:"",parentId:0,parentName:"",orderNum:0},dataRule:{name:[{required:!0,message:"机构名称不能为空",trigger:"blur"}],parentName:[{required:!0,message:"上级机构不能为空",trigger:"change"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.dept.findDeptTree().then((function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1}))},getParentMenuTree:function(e){var t={parentId:0,name:"顶级菜单",children:e};return[t]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:"",name:"",parentId:0,parentName:"",orderNum:0}},handleEdit:function(e){this.dialogVisible=!0,Object.assign(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then((function(){var a=t.getDeleteIds([],e);t.$api.dept.batchDelete(a).then((function(e){console.log(e),t.findTreeData(),200==e.code?t.$message({message:"删除成功",type:"success"}):t.$message({message:"操作失败, "+e.msg,type:"error"})}))}))},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var a=0,n=t.children.length;a<n;a++)this.getDeleteIds(e,t.children[a]);return e},handleTreeSelectChange:function(e,t){console.log(t),this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},submitForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.$confirm("确认提交吗？","提示",{}).then((function(){e.editLoading=!0;var t=Object.assign({},e.dataForm);e.$api.dept.save(t).then((function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs["dataForm"].resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()}))}))}))},dateFormat:function(e,t,a,n){return console.log(a),console.log(n),Object(s["a"])(e[t.property])}},mounted:function(){this.findTreeData()}},c=d,u=a("2877"),p=Object(u["a"])(c,n,i,!1,null,"8664f6dc",null);t["default"]=p.exports},fea2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:loginlog:view",type:"primary"},on:{click:function(t){return e.findPage(null)}}})],1)],1)],1),a("kt-table",{attrs:{data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},i=[],l=(a("b0c0"),a("c719")),o=a("7a63"),r=a("9158"),s={components:{KtTable:l["a"],KtButton:o["a"]},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"status",label:"状态",minWidth:120},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.params={name:this.filters.name,status:"online"},this.$api.loginlog.findPage(this.pageRequest).then((function(e){t.pageResult=e.data})).then(null!=e?e.callback:"")},dateFormat:function(e,t){return Object(r["a"])(e[t.property])}},mounted:function(){}},d=s,c=a("2877"),u=Object(c["a"])(d,n,i,!1,null,"b98ff044",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-e2d4debc.c1299b0d.js.map